<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>06-ç¼–è¯‘å™¨å‰ç«¯å·¥å…·ï¼ˆä¸€ï¼‰ï¼šç”¨Antlrç”Ÿæˆè¯æ³•ã€è¯­æ³•åˆ†æå™¨</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>06-ç¼–è¯‘å™¨å‰ç«¯å·¥å…·ï¼ˆä¸€ï¼‰ï¼šç”¨Antlrç”Ÿæˆè¯æ³•ã€è¯­æ³•åˆ†æå™¨</h1>
<p>å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘é‡ç‚¹è®²è§£äº†è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æï¼Œåœ¨ä¾‹å­ä¸­æåˆ°çš„è¯æ³•å’Œè¯­æ³•è§„åˆ™ä¹Ÿæ˜¯é«˜åº¦ç®€åŒ–çš„ã€‚è™½ç„¶è¿™äº›å†…å®¹ä¾¿äºç†è§£åŸç†ï¼Œä¹Ÿèƒ½å®ç°ä¸€ä¸ªç®€å•çš„åŸå‹ï¼Œåœ¨å®é™…åº”ç”¨ä¸­å´è¿œè¿œä¸å¤Ÿã€‚å®é™…åº”ç”¨ä¸­ï¼Œä¸€ä¸ªå®Œå–„çš„ç¼–è¯‘ç¨‹åºè¿˜è¦åœ¨è¯æ³•æ–¹é¢ä»¥åŠè¯­æ³•æ–¹é¢å®ç°å¾ˆå¤šå·¥ä½œï¼Œæˆ‘è¿™é‡Œç‰¹æ„ç”»äº†ä¸€å¼ å›¾ï¼Œä½ å¯ä»¥ç›´è§‚åœ°çœ‹ä¸€ä¸‹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/49/c1/49098ee32e1344550c41312862ec8ec1.jpg" alt=""></p><p>å¦‚æœè®©ç¼–è¯‘ç¨‹åºå®ç°ä¸Šé¢è¿™ä¹ˆå¤šå·¥ä½œï¼Œå®Œå…¨æ‰‹å†™æ•ˆç‡ä¼šæœ‰ç‚¹å„¿ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥æå‡æ•ˆç‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å€ŸåŠ©å·¥å…·ã€‚</p><p>ç¼–è¯‘å™¨å‰ç«¯å·¥å…·æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚Lexï¼ˆä»¥åŠGNUçš„ç‰ˆæœ¬Flexï¼‰ã€Yaccï¼ˆä»¥åŠGNUçš„ç‰ˆæœ¬Bisonï¼‰ã€JavaCCç­‰ç­‰ã€‚ä½ å¯èƒ½ä¼šé—®äº†ï¼šâ€œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿™èŠ‚è¯¾åªè®²Antlrï¼Œä¸é€‰åˆ«çš„å·¥å…·å‘¢ï¼Ÿâ€ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ã€‚</p><p>ç¬¬ä¸€ä¸ªåŸå› æ˜¯Antlrèƒ½æ”¯æŒæ›´å¹¿æ³›çš„ç›®æ ‡è¯­è¨€ï¼ŒåŒ…æ‹¬Javaã€C#ã€JavaScriptã€Pythonã€Goã€C++ã€Swiftã€‚æ— è®ºä½ ç”¨ä¸Šé¢å“ªç§è¯­è¨€ï¼Œéƒ½å¯ä»¥ç”¨å®ƒç”Ÿæˆè¯æ³•å’Œè¯­æ³•åˆ†æçš„åŠŸèƒ½ã€‚è€Œæˆ‘ä»¬å°±ä½¿ç”¨å®ƒç”Ÿæˆäº†Javaè¯­è¨€å’ŒC++è¯­è¨€ä¸¤ä¸ªç‰ˆæœ¬çš„ä»£ç ã€‚</p><p>ç¬¬äºŒä¸ªåŸå› æ˜¯Antlrçš„è¯­æ³•æ›´åŠ ç®€å•ã€‚å®ƒèƒ½æŠŠç±»ä¼¼å·¦é€’å½’çš„ä¸€äº›å¸¸è§éš¾ç‚¹åœ¨å·¥å…·ä¸­è§£å†³ï¼Œå¯¹æå‡å·¥ä½œæ•ˆç‡æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚è¿™ä¸€ç‚¹ï¼Œä½ ä¼šåœ¨åé¢çš„è¯¾ç¨‹ä¸­ç›´è§‚åœ°æ„Ÿå—åˆ°ã€‚</p><p>è€Œæˆ‘ä»¬ä»Šå¤©çš„ç›®æ ‡å°±æ˜¯äº†è§£Antlrï¼Œç„¶åèƒ½å¤Ÿä½¿ç”¨Antlrç”Ÿæˆè¯æ³•åˆ†æå™¨ä¸è¯­æ³•åˆ†æå™¨ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘è¿˜ä¼šå¸¦ä½ å€Ÿé‰´æˆç†Ÿçš„è¯æ³•å’Œè¯­æ³•è§„åˆ™ï¼Œè®©ä½ å¿«é€Ÿæˆé•¿ã€‚</p><!-- [[[read_end]]] --><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹Antlrè¿™ä¸ªå·¥å…·ã€‚</p><h2>åˆè¯†Antlr</h2><p>Antlræ˜¯ä¸€ä¸ªå¼€æºçš„å·¥å…·ï¼Œæ”¯æŒæ ¹æ®è§„åˆ™æ–‡ä»¶ç”Ÿæˆè¯æ³•åˆ†æå™¨å’Œè¯­æ³•åˆ†æå™¨ï¼Œå®ƒè‡ªèº«æ˜¯ç”¨Javaå®ç°çš„ã€‚</p><p>ä½ å¯ä»¥<a href="https://www.antlr.org/">ä¸‹è½½Antlrå·¥å…·</a>ï¼Œå¹¶æ ¹æ®è¯´æ˜åšå¥½é…ç½®ã€‚åŒæ—¶ï¼Œä½ è¿˜éœ€è¦é…ç½®å¥½æœºå™¨ä¸Šçš„Javaç¯å¢ƒï¼ˆå¯ä»¥åœ¨<a href="https://www.oracle.com/index.html">Oracleå®˜ç½‘</a>æ‰¾åˆ°æœ€æ–°ç‰ˆæœ¬çš„JDKï¼‰ã€‚</p><p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯Macï¼Œæ‰€ä»¥æˆ‘ç”¨macOSå¹³å°ä¸‹çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·Homebrewå®‰è£…äº†Antlrï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è®¾ç½®å¥½antlrå’Œgrunä¸¤ä¸ªå‘½ä»¤ï¼ˆantlrå’Œgrunåˆ†åˆ«æ˜¯java org.antlr.v4.Toolå’Œjava org.antlr.v4.gui.TestRigè¿™ä¸¤ä¸ªå‘½ä»¤çš„åˆ«åï¼‰ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ è¦æŠŠAntlrçš„JARæ–‡ä»¶è®¾ç½®åˆ°CLASSPATHç¯å¢ƒå˜é‡ä¸­ï¼Œä»¥ä¾¿é¡ºåˆ©ç¼–è¯‘æ‰€ç”Ÿæˆçš„Javaæºä»£ç ã€‚</p><p><a href="https://github.com/antlr/grammars-v4">GitHub</a>ä¸Šè¿˜æœ‰å¾ˆå¤šä¾›å‚è€ƒçš„è¯­æ³•è§„åˆ™ï¼Œä½ å¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°ç¡¬ç›˜éšæ—¶æŸ¥é˜…ã€‚</p><p>ç°åœ¨ä½ å·²ç»å¯¹Antlræœ‰äº†åˆæ­¥çš„äº†è§£ï¼Œä¹ŸçŸ¥é“å¦‚ä½•å®‰è£…å®ƒäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å¸¦ä½ å®é™…ç”¨ä¸€ç”¨Antlrï¼Œè®©ä½ ç”¨æ›´è½»æ¾çš„æ–¹å¼ç”Ÿæˆè¯æ³•åˆ†æå™¨å’Œè¯­æ³•åˆ†æå™¨ã€‚</p><h2>ç”¨Antlrç”Ÿæˆè¯æ³•åˆ†æå™¨</h2><p>ä½ å¯èƒ½å¯¹Antlrè¿˜ä¸æ€ä¹ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥æˆ‘ä¼šå…ˆå¸¦ä½ ä½¿ç”¨å‰é¢è¯¾ç¨‹ä¸­ï¼Œä½ å·²ç»æ¯”è¾ƒç†Ÿæ‚‰çš„é‚£äº›è¯æ³•è§„åˆ™ï¼Œè®©Antlrç”Ÿæˆä¸€ä¸ªæ–°çš„è¯æ³•åˆ†æå™¨ï¼Œç„¶åå†å€Ÿé‰´ä¸€äº›æˆç†Ÿçš„è§„åˆ™æ–‡ä»¶ï¼ŒæŠŠè¯æ³•åˆ†æå™¨æå‡åˆ°æ›´åŠ ä¸“ä¸šã€å®ç”¨çš„çº§åˆ«ã€‚</p><p>Antlré€šè¿‡è§£æè§„åˆ™æ–‡ä»¶æ¥ç”Ÿæˆç¼–è¯‘å™¨ã€‚è§„åˆ™æ–‡ä»¶ä»¥.g4ç»“å°¾ï¼Œè¯æ³•è§„åˆ™å’Œè¯­æ³•è§„åˆ™å¯ä»¥æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œã€‚ä¸è¿‡ä¸ºäº†æ¸…æ™°èµ·è§ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠå®ƒä»¬åˆ†æˆä¸¤ä¸ªæ–‡ä»¶ï¼Œå…ˆç”¨ä¸€ä¸ªæ–‡ä»¶ç¼–å†™è¯æ³•è§„åˆ™ã€‚</p><p><strong>ä¸ºäº†è®©ä½ å¿«é€Ÿè¿›å…¥çŠ¶æ€ï¼Œæˆ‘ä»¬å…ˆåšä¸€ä¸ªç®€å•çš„ç»ƒä¹ é¢„çƒ­ä¸€ä¸‹ã€‚</strong>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªHello.g4æ–‡ä»¶ï¼Œç”¨äºä¿å­˜è¯æ³•è§„åˆ™ï¼Œç„¶åæŠŠä¹‹å‰ç”¨è¿‡çš„ä¸€äº›è¯æ³•è§„åˆ™å†™è¿›å»ã€‚</p><pre><code>lexer grammar Hello;  //lexerå…³é”®å­—æ„å‘³ç€è¿™æ˜¯ä¸€ä¸ªè¯æ³•è§„åˆ™æ–‡ä»¶ï¼Œåç§°æ˜¯Helloï¼Œè¦ä¸æ–‡ä»¶åç›¸åŒ

//å…³é”®å­—
If :               'if';
Int :              'int';

//å­—é¢é‡
IntLiteral:        [0-9]+;
StringLiteral:      '&quot;' .*? '&quot;' ;  //å­—ç¬¦ä¸²å­—é¢é‡

//æ“ä½œç¬¦
AssignmentOP:       '=' ;    
RelationalOP:       '&gt;'|'&gt;='|'&lt;' |'&lt;=' ;    
Star:               '*';
Plus:               '+';
Sharp:              '#';
SemiColon:          ';';
Dot:                '.';
Comm:               ',';
LeftBracket :       '[';
RightBracket:       ']';
LeftBrace:          '{';
RightBrace:         '}';
LeftParen:          '(';
RightParen:         ')';

//æ ‡è¯†ç¬¦
Id :                [a-zA-Z_] ([a-zA-Z_] | [0-9])*;

//ç©ºç™½å­—ç¬¦ï¼ŒæŠ›å¼ƒ
Whitespace:         [ \t]+ -&gt; skip;
Newline:            ( '\r' '\n'?|'\n')-&gt; skip;
</code></pre><p>ä½ èƒ½å¾ˆç›´è§‚åœ°çœ‹åˆ°ï¼Œæ¯ä¸ªè¯æ³•è§„åˆ™éƒ½æ˜¯å¤§å†™å­—æ¯å¼€å¤´ï¼Œè¿™æ˜¯Antlrå¯¹è¯æ³•è§„åˆ™çš„çº¦å®šã€‚è€Œè¯­æ³•è§„åˆ™æ˜¯ä»¥å°å†™å­—æ¯å¼€å¤´çš„ã€‚å…¶ä¸­ï¼Œæ¯ä¸ªè§„åˆ™éƒ½æ˜¯ç”¨æˆ‘ä»¬å·²ç»äº†è§£çš„æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™çš„ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ç¼–è¯‘è¯æ³•è§„åˆ™ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼š</p><pre><code>antlr Hello.g4
</code></pre><p>è¿™ä¸ªå‘½ä»¤æ˜¯è®©Antlrç¼–è¯‘è§„åˆ™æ–‡ä»¶ï¼Œå¹¶ç”ŸæˆHello.javaæ–‡ä»¶å’Œå…¶ä»–ä¸¤ä¸ªè¾…åŠ©æ–‡ä»¶ã€‚ä½ å¯ä»¥æ‰“å¼€çœ‹ä¸€çœ‹æ–‡ä»¶é‡Œé¢çš„å†…å®¹ã€‚æ¥ç€ï¼Œæˆ‘ç”¨ä¸‹é¢çš„å‘½ä»¤ç¼–è¯‘Hello.javaï¼š</p><pre><code>javac *.java
</code></pre><p>ç»“æœä¼šç”ŸæˆHello.classæ–‡ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç”Ÿæˆçš„è¯æ³•åˆ†æå™¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å†™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œè®©ç”Ÿæˆçš„è¯æ³•åˆ†æå™¨è§£æä¸€ä¸‹ï¼š</p><pre><code>int age = 45;
if (age &gt;= 17+8+20){
  printf(&quot;Hello old man!&quot;);
}
</code></pre><p>æˆ‘ä»¬å°†ä¸Šé¢çš„è„šæœ¬å­˜æˆhello.playæ–‡ä»¶ï¼Œç„¶ååœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>grun Hello tokens -tokens hello.play
</code></pre><p>grunå‘½ä»¤å®é™…ä¸Šæ˜¯è°ƒç”¨äº†æˆ‘ä»¬åˆšæ‰ç”Ÿæˆçš„è¯æ³•åˆ†æå™¨ï¼Œå³Helloç±»ï¼Œæ‰“å°å‡ºå¯¹hello.playè¯æ³•åˆ†æçš„ç»“æœï¼š</p><p><img src="https://static001.geekbang.org/resource/image/dc/e9/dc9f9dcebd4c73eecd05fece12ba38e9.jpg" alt=""></p><p>ä»ç»“æœä¸­çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„è¯æ³•åˆ†æå™¨æŠŠæ¯ä¸ªTokenéƒ½è¯†åˆ«äº†ï¼Œè¿˜è®°å½•äº†å®ƒä»¬åœ¨ä»£ç ä¸­çš„ä½ç½®ã€æ–‡æœ¬å€¼ã€ç±»åˆ«ã€‚ä¸Šé¢è¿™äº›éƒ½æ˜¯Tokençš„å±æ€§ã€‚</p><p>ä»¥ç¬¬äºŒè¡Œ[@1, 4:6=â€˜ageâ€™,&lt; Id &gt;,1:4]ä¸ºä¾‹ï¼Œå…¶ä¸­@1æ˜¯Tokençš„æµæ°´ç¼–å·ï¼Œè¡¨æ˜è¿™æ˜¯1å·Tokenï¼›4:6æ˜¯Tokenåœ¨å­—ç¬¦æµä¸­çš„å¼€å§‹å’Œç»“æŸä½ç½®ï¼›ageæ˜¯æ–‡æœ¬å€¼ï¼ŒIdæ˜¯å…¶Tokenç±»åˆ«ï¼›æœ€åçš„1:4è¡¨ç¤ºè¿™ä¸ªTokenåœ¨æºä»£ç ä¸­ä½äºç¬¬1è¡Œã€ç¬¬4åˆ—ã€‚</p><p>éå¸¸å¥½ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»è®©Antlré¡ºåˆ©è·‘èµ·æ¥äº†ï¼æ¥ä¸‹æ¥ï¼Œè®©è¯æ³•è§„åˆ™æ›´å®Œå–„ã€æ›´ä¸¥å¯†ä¸€äº›å§ï¼<strong>æ€ä¹ˆåšå‘¢ï¼Ÿå½“ç„¶æ˜¯å‚è€ƒæˆç†Ÿçš„è§„åˆ™æ–‡ä»¶ã€‚</strong></p><p>ä»Antlrçš„ä¸€äº›ç¤ºèŒƒæ€§çš„è§„åˆ™æ–‡ä»¶ä¸­ï¼Œæˆ‘é€‰äº†Javaçš„ä½œä¸ºå‚è€ƒã€‚å…ˆçœ‹çœ‹æˆ‘ä»¬ä¹‹å‰å†™çš„å­—ç¬¦ä¸²å­—é¢é‡çš„è§„åˆ™ï¼š</p><pre><code>StringLiteral:      '&quot;' .*? '&quot;' ;  //å­—ç¬¦ä¸²å­—é¢é‡
</code></pre><p>æˆ‘ä»¬çš„ç‰ˆæœ¬ç›¸å½“ç®€åŒ–ï¼Œå°±æ˜¯åœ¨åŒå¼•å·å¯ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ã€‚å¯è¿™åœ¨å®é™…ä¸­ä¸å¤§å¥½ç”¨ï¼Œå› ä¸ºè¿è½¬ä¹‰åŠŸèƒ½éƒ½æ²¡æœ‰æä¾›ã€‚æˆ‘ä»¬å¯¹äºä¸€äº›ä¸å¯è§çš„å­—ç¬¦ï¼Œæ¯”å¦‚å›è½¦ï¼Œè¦æä¾›è½¬ä¹‰åŠŸèƒ½ï¼Œå¦‚â€œ\nâ€ã€‚åŒæ—¶ï¼Œå¦‚æœå­—ç¬¦ä¸²é‡Œæœ¬èº«æœ‰åŒå¼•å·çš„è¯ï¼Œä¹Ÿè¦å°†å®ƒè½¬ä¹‰ï¼Œå¦‚â€œ\â€ã€‚Unicodeä¹Ÿè¦è½¬ä¹‰ã€‚æœ€åï¼Œè½¬ä¹‰å­—ç¬¦æœ¬èº«ä¹Ÿéœ€è¦è½¬ä¹‰ï¼Œå¦‚â€œ\\â€ã€‚</p><p>ä¸‹é¢è¿™ä¸€æ®µå†…å®¹æ˜¯Javaè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²å­—é¢é‡çš„å®Œæ•´è§„åˆ™ã€‚ä½ å¯ä»¥çœ‹ä¸€ä¸‹æ–‡ç¨¿ï¼Œè¿™ä¸ªè§„åˆ™å°±å¾ˆç»†è‡´äº†ï¼ŒæŠŠå„ç§è½¬ä¹‰çš„æƒ…å†µéƒ½è€ƒè™‘è¿›å»äº†ï¼š</p><pre><code>STRING_LITERAL:     '&quot;' (~[&quot;\\\r\n] | EscapeSequence)* '&quot;';

fragment EscapeSequence
    : '\\' [btnfr&quot;'\\]
    | '\\' ([0-3]? [0-7])? [0-7]
    | '\\' 'u'+ HexDigit HexDigit HexDigit HexDigit
    ;

fragment HexDigit
    : [0-9a-fA-F]
    ;  
</code></pre><p>åœ¨è¿™ä¸ªè§„åˆ™æ–‡ä»¶ä¸­ï¼ŒfragmentæŒ‡çš„æ˜¯ä¸€ä¸ªè¯­æ³•ç‰‡æ®µï¼Œæ˜¯ä¸ºäº†è®©è§„åˆ™å®šä¹‰æ›´æ¸…æ™°ã€‚å®ƒæœ¬èº«å¹¶ä¸ç”ŸæˆTokenï¼Œåªæœ‰StringLiteralè§„åˆ™æ‰ä¼šç”ŸæˆTokenã€‚</p><p>å½“ç„¶äº†ï¼Œé™¤äº†å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæ•°å­—å­—é¢é‡ã€æ ‡è¯†ç¬¦çš„è§„åˆ™ä¹Ÿå¯ä»¥å®šä¹‰å¾—æ›´ä¸¥å¯†ã€‚ä¸è¿‡ï¼Œå› ä¸ºè¿™äº›è§„åˆ™æ–‡ä»¶éƒ½å¾ˆä¸¥å¯†ï¼Œå†™å‡ºæ¥éƒ½å¾ˆé•¿ï¼Œåœ¨è¿™é‡Œæˆ‘å°±ä¸ä¸€ä¸€å±•å¼€äº†ã€‚å¦‚æœæ„Ÿå…´è¶£ï¼Œæˆ‘æ¨èä½ åœ¨ä¸‹è½½çš„è§„åˆ™æ–‡ä»¶ä¸­æ‰¾åˆ°è¿™äº›éƒ¨åˆ†çœ‹ä¸€çœ‹ã€‚ä½ è¿˜å¯ä»¥å‚è€ƒä¸åŒä½œè€…å†™çš„è¯æ³•è§„åˆ™ï¼Œä½“ä¼šä¸€ä¸‹ä»–ä»¬çš„è®¾è®¡æ€è·¯ã€‚å’Œé«˜æ‰‹è¿‡æ‹›ï¼Œä¼šæ›´å¿«åœ°æé«˜ä½ çš„æ°´å¹³ã€‚</p><p>æˆ‘ä¹Ÿæ‹·è´äº†ä¸€äº›æˆç†Ÿçš„è¯æ³•è§„åˆ™ï¼Œç¼–å†™äº†ä¸€ä¸ªCommonLexer.g4çš„è§„åˆ™æ–‡ä»¶ï¼Œè¿™ä¸ªè¯æ³•è§„åˆ™æ˜¯æˆ‘ä»¬åé¢å·¥ä½œçš„åŸºç¡€ï¼Œå®ƒåŸºæœ¬ä¸Šå·²ç»è¾¾åˆ°äº†ä¸“ä¸šã€å®ç”¨çš„ç¨‹åº¦ã€‚</p><p>åœ¨å¸¦ä½ å€Ÿé‰´äº†æˆç†Ÿçš„è§„åˆ™æ–‡ä»¶ä¹‹åï¼Œæˆ‘æƒ³ç©¿æ’æ€§åœ°è®²è§£ä¸€ä¸‹åœ¨è¯æ³•è§„åˆ™ä¸­å¯¹Tokenå½’ç±»çš„é—®é¢˜ã€‚åœ¨è®¾è®¡è¯æ³•è§„åˆ™æ—¶ï¼Œä½ ç»å¸¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯æ³•è§„åˆ™ä¼šæ›´åŠ å®Œå–„ã€‚</p><p>åœ¨å‰é¢ç»ƒä¹ çš„è§„åˆ™æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æŠŠ&gt;=ã€&gt;ã€&lt;éƒ½å½’ç±»ä¸ºå…³ç³»è¿ç®—ç¬¦ï¼Œç®—ä½œåŒä¸€ç±»Tokenï¼Œè€Œ+ã€*ç­‰éƒ½å•ç‹¬ä½œä¸ºå¦ä¸€ç±»Tokenã€‚é‚£ä¹ˆï¼Œå“ªäº›å¯ä»¥å½’å¹¶æˆä¸€ç±»ï¼Œå“ªäº›åˆæ˜¯éœ€è¦å•ç‹¬åˆ—å‡ºçš„å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œè¿™ä¸»è¦å–å†³äºè¯­æ³•çš„éœ€è¦ã€‚ä¹Ÿå°±æ˜¯åœ¨è¯­æ³•è§„åˆ™æ–‡ä»¶é‡Œï¼Œæ˜¯å¦å¯ä»¥å‡ºç°åœ¨åŒä¸€æ¡è§„åˆ™é‡Œã€‚å®ƒä»¬åœ¨è¯­æ³•å±‚é¢ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯åœ¨è¯­ä¹‰å±‚é¢ä¸Šæœ‰åŒºåˆ«ã€‚æ¯”å¦‚ï¼ŒåŠ æ³•å’Œå‡æ³•è™½ç„¶æ˜¯ä¸åŒçš„è¿ç®—ï¼Œä½†å®ƒä»¬å¯ä»¥åŒæ—¶å‡ºç°åœ¨åŒä¸€æ¡è¯­æ³•è§„åˆ™ä¸­ï¼Œå®ƒä»¬åœ¨è¿ç®—æ—¶çš„ç‰¹æ€§å®Œå…¨ä¸€è‡´ï¼ŒåŒ…æ‹¬ä¼˜å…ˆçº§å’Œç»“åˆæ€§ï¼Œä¹˜æ³•å’Œé™¤æ³•å¯ä»¥åŒæ—¶å‡ºç°åœ¨ä¹˜æ³•è§„åˆ™ä¸­ã€‚ä½ æŠŠåŠ å·å’Œå‡å·åˆå¹¶æˆä¸€ç±»ï¼ŒæŠŠä¹˜å·å’Œé™¤å·åˆå¹¶æˆä¸€ç±»æ˜¯å¯ä»¥çš„ã€‚æŠŠè¿™4ä¸ªè¿ç®—ç¬¦æ¯ä¸ªéƒ½å•ç‹¬ä½œä¸ºä¸€ç±»ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯ï¼Œä¸èƒ½æŠŠåŠ å·å’Œä¹˜å·ä½œä¸ºåŒä¸€ç±»ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç®—æœ¯è¿ç®—ä¸­çš„ä¼˜å…ˆçº§ä¸åŒï¼Œè‚¯å®šå‡ºç°åœ¨ä¸åŒçš„è¯­æ³•è§„åˆ™ä¸­ã€‚</p><p>æˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹åœ¨â€œ<a href="https://time.geekbang.org/column/article/118378">02 | æ­£åˆ™æ–‡æ³•å’Œæœ‰é™è‡ªåŠ¨æœºï¼šçº¯æ‰‹å·¥æ‰“é€ è¯æ³•åˆ†æå™¨</a>â€é‡Œåšè¯æ³•åˆ†ææ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚å½“æ—¶ï¼Œæˆ‘ä»¬åˆ†æäº†è¯æ³•å†²çªçš„é—®é¢˜ï¼Œå³æ ‡è¯†ç¬¦å’Œå…³é”®å­—çš„è§„åˆ™æ˜¯æœ‰é‡å çš„ã€‚Antlræ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå®ƒå¼•å…¥äº†ä¼˜å…ˆçº§çš„æ¦‚å¿µã€‚åœ¨Antlrçš„è§„åˆ™æ–‡ä»¶ä¸­ï¼Œè¶Šæ˜¯å‰é¢å£°æ˜çš„è§„åˆ™ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠå…³é”®å­—çš„è§„åˆ™æ”¾åœ¨IDçš„è§„åˆ™å‰é¢ã€‚ç®—æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šé¦–å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºå…³é”®å­—ï¼Œç„¶åæ‰ä¼šæ£€æŸ¥æ˜¯å¦ä¸ºIDï¼Œä¹Ÿå°±æ˜¯æ ‡è¯†ç¬¦ã€‚</p><p>è¿™è·Ÿæˆ‘ä»¬å½“æ—¶æ„é€ æœ‰é™è‡ªåŠ¨æœºåšè¯æ³•åˆ†ææ˜¯ä¸€æ ·çš„ã€‚é‚£æ—¶ï¼Œæˆ‘ä»¬å…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯å…³é”®å­—ï¼Œå¦‚æœä¸æ˜¯å…³é”®å­—ï¼Œæ‰è¯†åˆ«ä¸ºæ ‡è¯†ç¬¦ã€‚è€Œåœ¨Antlré‡Œï¼Œä»…ä»…é€šè¿‡å£°æ˜çš„é¡ºåºå°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œçœäº†å¾ˆå¤šäº‹å„¿å•Šï¼</p><p>å†è¯´ä¸ªæœ‰è¶£çš„é¢˜å¤–è¯ã€‚ä¹‹å‰å›½å†…æœ‰äººæâ€œä¸­æ–‡ç¼–ç¨‹è¯­è¨€â€çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯­æ³•ä¸­çš„å…³é”®å­—é‡‡ç”¨ä¸­æ–‡ï¼Œæ¯”å¦‚â€œå¦‚æœâ€â€œé‚£ä¹ˆâ€ç­‰ã€‚ä»–ä»¬ä¼¼ä¹è§‰å¾—è¿™æ ·æ›´å®¹æ˜“ç†è§£å’ŒæŒæ¡ã€‚æˆ‘ä¸å¤ªæå€¡è¿™ç§æƒ³æ³•ï¼Œåˆ«çš„ä¸è¯´ï¼Œç”¨ä¸­æ–‡å†™å…³é”®å­—å’Œå˜é‡åï¼Œéœ€è¦è¾“å…¥æ›´å¤šçš„å­—ç¬¦ï¼Œæœ‰ç‚¹å„¿éº»çƒ¦ã€‚ä¸­å›½çš„è‹±è¯­æ•™è‚²å¾ˆæ™®åŠï¼Œç”¨è‹±è¯­æ¥å†™ä»£ç ï¼Œå…¶å®å°±å¤Ÿäº†ã€‚</p><p>ä¸è¿‡ï¼Œä½ å¤§å¯ä»¥è¯•ä¸€ä¸‹ï¼Œè®©è‡ªå·±çš„è¯æ³•è§„åˆ™æ”¯æŒä¸­æ–‡å…³é”®å­—ã€‚æ¯”å¦‚ï¼ŒæŠŠâ€œIfâ€çš„è§„åˆ™æ”¹æˆåŒæ—¶æ”¯æŒè‹±æ–‡çš„â€œifâ€ï¼Œä»¥åŠä¸­æ–‡çš„â€œå¦‚æœâ€ï¼š</p><pre><code>If:                 'if' | 'å¦‚æœ';
</code></pre><p>å†æŠŠæµ‹è¯•ç”¨çš„è„šæœ¬hello.playä¸­çš„â€œifâ€ä¹Ÿæ”¹æˆâ€œå¦‚æœâ€ï¼Œå†™æˆï¼š</p><pre><code>å¦‚æœ (age &gt;= 17+8+20){
</code></pre><p>é‡æ–°ç”Ÿæˆè¯æ³•åˆ†æå™¨å¹¶è¿è¡Œï¼Œä½ ä¼šå‘ç°è¾“å‡ºä¸­æœ‰è¿™ä¹ˆä¸€è¡Œï¼š</p><pre><code>[@5,14:15='å¦‚æœ',&lt;If&gt;,2:0]
</code></pre><p>è¿™ä¸ªTokençš„æ–‡æœ¬å€¼æ˜¯â€œå¦‚æœâ€ï¼Œä½†ç±»åˆ«ä»ç„¶æ˜¯â€œIfâ€ã€‚æ‰€ä»¥ï¼Œè¦æƒ³å®ç°æ‰€è°“çš„â€œä¸­æ–‡ç¼–ç¨‹è¯­è¨€â€ï¼ŒæŠŠCã€Javaç­‰è¯­è¨€çš„è¯æ³•è§„åˆ™æ”¹ä¸€æ”¹ï¼Œå†æŠŠç¼–è¯‘å™¨é‡æ–°ç¼–è¯‘ä¸€ä¸‹å°±è¡Œäº†ï¼</p><h2>ç”¨Antlrç”Ÿæˆè¯­æ³•åˆ†æå™¨</h2><p>è¯´å›æˆ‘ä»¬çš„è¯é¢˜ã€‚ç°åœ¨ï¼Œä½ å·²ç»çŸ¥é“å¦‚ä½•ç”¨Antlråšä¸€ä¸ªè¯æ³•åˆ†æå™¨ï¼Œè¿˜çŸ¥é“å¯ä»¥å€Ÿé‰´æˆç†Ÿçš„è§„åˆ™æ–‡ä»¶ï¼Œè®©è‡ªå·±çš„è¯æ³•è§„åˆ™æ–‡ä»¶å˜å¾—æ›´å®Œå–„ã€æ›´ä¸“ä¸šã€‚æ¥ä¸‹æ¥ï¼Œè¯•ç€ç”¨Antlrç”Ÿæˆä¸€ä¸ªè¯­æ³•åˆ†æå™¨ï¼Œæ›¿ä»£ä¹‹å‰æ‰‹å†™çš„è¯­æ³•åˆ†æå™¨å§ï¼</p><p>è¿™ä¸€æ¬¡çš„æ–‡ä»¶åå«åšPlayScript.g4ã€‚PlayScriptæ˜¯ä¸ºæˆ‘ä»¬çš„è„šæœ¬è¯­è¨€èµ·çš„åç§°ï¼Œæ–‡ä»¶å¼€å¤´æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>grammar PlayScript;
import CommonLexer;   //å¯¼å…¥è¯æ³•å®šä¹‰

/*ä¸‹é¢çš„å†…å®¹åŠ åˆ°æ‰€ç”Ÿæˆçš„Javaæºæ–‡ä»¶çš„å¤´éƒ¨ï¼Œå¦‚åŒ…åç§°ï¼Œimportè¯­å¥ç­‰ã€‚*/
@header {
package antlrtest;
}
</code></pre><p>ç„¶åæŠŠä¹‹å‰åšè¿‡çš„è¯­æ³•å®šä¹‰æ”¾è¿›å»ã€‚Antlrå†…éƒ¨æœ‰è‡ªåŠ¨å¤„ç†å·¦é€’å½’çš„æœºåˆ¶ï¼Œä½ å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°æŠŠè¯­æ³•è§„åˆ™å†™æˆä¸‹é¢çš„æ ·å­ï¼š</p><pre><code>expression
    :   assignmentExpression
    |   expression ',' assignmentExpression
    ;

assignmentExpression
    :   additiveExpression
    |   Identifier assignmentOperator additiveExpression
    ;

assignmentOperator
    :   '='
    |   '*='
    |	'/='
    |   '%='
    |   '+='
    |   '-='
    ;

additiveExpression
    :   multiplicativeExpression
    |   additiveExpression '+' multiplicativeExpression
    |   additiveExpression '-' multiplicativeExpression
    ;

multiplicativeExpression
    :   primaryExpression
    |   multiplicativeExpression '*' primaryExpression
    |   multiplicativeExpression '/' primaryExpression
    |   multiplicativeExpression '%' primaryExpression
    ;
</code></pre><p>ä½ å¯èƒ½ä¼šé—®ï¼šâ€œæ—¢ç„¶ç”¨Antlrå¯ä»¥ä¸ç®¡å·¦é€’å½’é—®é¢˜ï¼Œé‚£ä¹‹å‰ä¸ºä»€ä¹ˆè¦è´¹åŠ›æ°”è§£å†³å®ƒå‘¢ï¼Ÿâ€é‚£æ˜¯å› ä¸ºå½“ä½ é‡åˆ°æŸäº›é—®é¢˜å´æ²¡æœ‰ç°æˆå·¥å…·æ—¶ï¼Œè¿˜æ˜¯è¦ç”¨çº¯æ‰‹å·¥çš„æ–¹æ³•å»è§£å†³é—®é¢˜ã€‚è€Œä¸”ï¼Œæœ‰çš„å·¥å…·å¯èƒ½æ²¡æœ‰è¿™ä¹ˆæ™ºèƒ½ï¼Œä½ éœ€è¦å†™å‡ºç¬¦åˆè¿™ä¸ªå·¥å…·çš„è§„åˆ™æ–‡ä»¶ï¼Œæ¯”å¦‚è¯´ä¸èƒ½æœ‰å·¦é€’å½’çš„è¯­æ³•è§„åˆ™ã€‚<strong>è¿˜æ˜¯é‚£å¥è¯ï¼šæ‡‚å¾—åŸºç¡€åŸç†ï¼Œä¼šè®©ä½ ç«™å¾—æ›´é«˜ã€‚</strong></p><p>æˆ‘ä»¬ç»§ç»­è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œç”Ÿæˆè¯­æ³•åˆ†æå™¨ï¼š</p><pre><code>antlr PlayScript.g4
javac antlrtest/*.java
</code></pre><p>ç„¶åæµ‹è¯•ä¸€ä¸‹ç”Ÿæˆçš„è¯­æ³•åˆ†æå™¨ï¼š</p><pre><code>grun antlrtest.PlayScript expression -gui
</code></pre><p>è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ï¼šæµ‹è¯•PlayScriptè¿™ä¸ªç±»çš„expressionæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è§£æè¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œç»“æœç”¨å›¾å½¢åŒ–ç•Œé¢æ˜¾ç¤ºã€‚</p><p>æˆ‘ä»¬åœ¨æ§åˆ¶å°ç•Œé¢ä¸­è¾“å…¥ä¸‹é¢çš„å†…å®¹ï¼š</p><pre><code>age + 10 * 2  + 10
^D
</code></pre><p>å…¶ä¸­^Dæ˜¯æŒ‰ä¸‹Ctlé”®çš„åŒæ—¶æŒ‰ä¸‹Dï¼Œç›¸å½“äºåœ¨ç»ˆç«¯è¾“å…¥ä¸€ä¸ªEOFå­—ç¬¦ï¼Œå³æ–‡ä»¶ç»“æŸç¬¦å·ï¼ˆWindowsæ“ä½œç³»ç»Ÿè¦ä½¿ç”¨^Zï¼‰ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æå‰æŠŠè¿™äº›è¯­å¥æ”¾åˆ°æ–‡ä»¶ä¸­ï¼ŒæŠŠæ–‡ä»¶åä½œä¸ºå‘½ä»¤å‚æ•°ã€‚ä¹‹åï¼Œè¯­æ³•åˆ†æå™¨ä¼šåˆ†æè¿™äº›è¯­æ³•ï¼Œå¹¶å¼¹å‡ºä¸€ä¸ªçª—å£æ¥æ˜¾ç¤ºASTï¼š</p><p><img src="https://static001.geekbang.org/resource/image/96/17/96ef2f2ca1f1465893a70e742b93fd17.jpg" alt=""></p><p>çœ‹å¾—å‡ºæ¥ï¼ŒASTå®Œå…¨æ­£ç¡®ï¼Œä¼˜å…ˆçº§å’Œç»“åˆæ€§ä¹Ÿéƒ½æ²¡é”™ã€‚æ‰€ä»¥ï¼ŒAntlrç”Ÿæˆçš„è¯­æ³•åˆ†æå™¨è¿˜æ˜¯å¾ˆé è°±çš„ã€‚ä»¥åï¼Œä½ ä¸“æ³¨å†™è¯­æ³•è§„åˆ™å°±è¡Œäº†ï¼Œå¯ä»¥æŠŠç²¾åŠ›æ”¾åœ¨è¯­è¨€çš„è®¾è®¡å’Œåº”ç”¨ä¸Šã€‚</p><h2>è¯¾ç¨‹å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ äº†è§£äº†Antlrï¼Œå¹¶ç”¨Antlrç”Ÿæˆäº†è¯æ³•åˆ†æå™¨å’Œè¯­æ³•åˆ†æå™¨ã€‚æœ‰äº†å·¥å…·çš„æ”¯æŒï¼Œä½ å¯ä»¥æŠŠä¸»è¦çš„ç²¾åŠ›æ”¾åœ¨ç¼–å†™è¯æ³•å’Œè¯­æ³•è§„åˆ™ä¸Šï¼Œæå‡äº†å·¥ä½œæ•ˆç‡ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘å¸¦ä½ å€Ÿé‰´äº†æˆç†Ÿçš„è¯æ³•è§„åˆ™å’Œè¯­æ³•è§„åˆ™ã€‚ä½ å¯ä»¥å°†è¿™äº›è§„åˆ™ç”¨åˆ°è‡ªå·±çš„è¯­è¨€è®¾è®¡ä¸­ã€‚é‡‡ç”¨å·¥å…·å’Œå€Ÿé‰´æˆç†Ÿè§„åˆ™ååˆ†é‡è¦ï¼Œç«™åœ¨åˆ«äººçš„è‚©è†€ä¸Šèƒ½è®©è‡ªå·±æ›´å¿«æˆé•¿ã€‚</p><p>åœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä¼šå¸¦ä½ å¿«é€Ÿå®ç°æŠ¥è¡¨å·¥å…·ã€SQLè§£æå™¨è¿™ç§éœ€è¦ç¼–è¯‘åŠŸèƒ½çš„åº”ç”¨ã€‚é‚£æ—¶ï¼Œä½ å°±æ›´èƒ½ä½“ä¼šåˆ°ï¼Œç”¨ç¼–è¯‘æŠ€æœ¯å®ç°ä¸€ä¸ªåŠŸèƒ½çš„è¿‡ç¨‹ï¼Œæ˜¯éå¸¸é«˜æ•ˆçš„ï¼ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¼šå¸¦ä½ æ‰©å±•æ›´å¤šçš„è¯­æ³•è§„åˆ™ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ›´å¼ºå¤§çš„è„šæœ¬è¯­è¨€è§£é‡Šå™¨ã€‚è¿™æ ·ï¼Œä½ å°±ä¼šå®ç°æµç¨‹æ§åˆ¶è¯­å¥ï¼Œæ¥ç€æ¢ç´¢å‡½æ•°ã€é—­åŒ…ã€é¢å‘å¯¹è±¡åŠŸèƒ½çš„å®ç°æœºåˆ¶ã€‚å‡ èŠ‚è¯¾ä¹‹åï¼Œä½ çš„æ‰‹é‡Œå°±çœŸçš„æœ‰ä¸€é—¨ä¸é”™çš„è„šæœ¬è¯­è¨€äº†ï¼</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>ä»Šå¤©æˆ‘ä»¬ä»‹ç»äº†Antlrè¿™ä¸ªå·¥å…·ï¼Œä½ æœ‰æ²¡æœ‰ä½¿ç”¨ç±»ä¼¼å·¥å…·çš„ç»éªŒï¼Ÿåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åˆæœ‰ä»€ä¹ˆå¿ƒå¾—æˆ–é—®é¢˜å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„å¿ƒå¾—æˆ–é—®é¢˜ã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p>æœ¬è®²çš„ç¤ºä¾‹ä»£ç ä½äºlab/antlrtestï¼Œä»£ç é“¾æ¥æˆ‘æ”¾åœ¨äº†æ–‡æœ«ï¼Œä¾›ä½ å‚è€ƒã€‚</p><ul>
<li>
<p>Hello.g4ï¼ˆç”¨Antlré‡å†™äº†å‰å‡ è®²çš„è¯æ³•è§„åˆ™ï¼‰ï¼š<a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/Hello.g4">ç äº‘</a> <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/Hello.g4">GitHub</a></p>
</li>
<li>
<p>CommonLexer.g4ï¼ˆæ¯”è¾ƒæˆç†Ÿçš„è¯æ³•æ–‡ä»¶ï¼‰ï¼š<a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/CommonLexer.g4">ç äº‘</a>  <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/CommonLexer.g4">GitHub</a></p>
</li>
<li>
<p>PlayScript.g4ï¼ˆç”¨Antlré‡å†™äº†å‰å‡ è®²çš„è¯­æ³•è§„åˆ™ï¼‰ï¼š<a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.g4">ç äº‘</a>  <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.g4">GitHub</a></p>
</li>
<li>
<p>ASTEvaluator.javaï¼ˆå¯¹ASTéå†ï¼Œå®ç°æ•´æ•°çš„ç®—æœ¯è¿ç®—ï¼‰ï¼š<a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/ASTEvaluator.java">ç äº‘</a>  <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/ASTEvaluator.java">GitHub</a></p>
</li>
<li>
<p>PlayScript.javaï¼ˆä¸€ä¸ªæµ‹è¯•ç¨‹åºï¼Œå®ç°è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€å…¬å¼è®¡ç®—ï¼‰ï¼š<a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.java">ç äº‘</a>  <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/antlrtest/src/antlrtest/PlayScript.java">GitHub</a></p>
</li>
</ul><p><img src="https://static001.geekbang.org/resource/image/00/66/008ff7b6092be5463a414a0e0771dc66.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            kaixiao7  2019-08-26 13:42:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            åœ¨Windowsä¸‹éœ€è¦ç”¨ ^z å³Ctrl+z æ¥å¼¹å‡ºASTçª—å£<br><br>That ^D means EOF on unix; it&#39;s ^Z in Windows. [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-26 15:12:40</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">windowsä¸‹ç”¨^Zï¼Ÿæˆ‘éƒ½æ²¡æ³¨æ„åˆ°è¿™ç‚¹ã€‚<br>å¥½çš„ï¼Œä¸€ä¸ªæœ‰ç”¨çš„çŸ¥è¯†ï¼Œåº”è¯¥åŠ åˆ°æ–‡ç¨¿ä¸­å»ã€‚<br>è°¢è°¢ä½ çš„æé†’ï¼<br>20å¹´å‰å¼€å§‹å­¦unixå‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¸€ç›´ç”¨^Dï¼Œå®Œå…¨æ²¡æ³¨æ„åˆ°åœ¨windowsä¸‹çš„ç”¨æ³•:-D<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            PythonAI  2019-08-26 10:54:11
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            âœ  antlr grun antlrtest.PlayScriptexpression -gui<br><br>Can&#39;t load antlrtest.PlayScriptexpression as lexer or parser [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-26 12:06:29</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">expressionå‰è¦æœ‰ç©ºæ ¼ï¼Œå‰é¢æ²¡æœ‰antlrã€‚<br>grun antlrtest.PlayScript expression -gui<br>æˆ‘è¯·ç¼–è¾‘æŠŠé‚£ä¸ªç©ºæ ¼åŠ ä¸Šã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é›²è‡³  2019-08-26 21:45:23
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆå¯ä»¥è®²ä¸€ä¸‹è§„åˆ™æ–‡ä»¶é‡Œä¸»è¦å•è¯çš„æ„ä¹‰å—ï¼Ÿ   çœ‹çš„æœ‰ç‚¹æ‡µ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é›²è‡³  2019-08-26 21:44:17
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆå¯ä»¥è®²ä¸‹è§„åˆ™æ–‡ä»¶é‡Œçš„ä¸»è¦å•è¯çš„æ„ä¹‰å—ï¼Ÿ   çœ‹çš„æœ‰ç‚¹è’™ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ææ‡‚  2019-08-26 19:37:56
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ‰§è¡Œè¿™ä¸ªgrun Hello tokens -tokens hello.play<br>æŠ¥é”™Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: Hello (wrong name: antlrtest&#47;Hello)<br><br>æ·»åŠ äº†.åˆ°classPath<br>åŸæ¥æ˜¯ç”Ÿæˆçš„Hello. javaä¸­æœ‰åŒ…å<br>package  antlrtestï¼›<br>ä½¿ç”¨<br>javac   -d  Hello. java<br><br>grun antlrtest.Hello tokens -tokens hello.play<br><br>å°±å¯ä»¥äº†ï¼Œç»ˆäºç¡¬ç€å¤´çš®çœ‹å®Œäº†ï¼Œå¯¹æˆ‘æ¥è¯´ç†è§£æœ‰ç‚¹è´¹åŠ²ï¼Œå¸Œæœ›èƒ½åšæŒä¸‹å»<br><br> 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Giacomo  2019-08-26 09:58:14
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¿˜æœ‰å°±æ˜¯å½“æˆ‘è¾“å…¥<br>$ javac Hello.java<br>$ grun Hello tokens -tokens hello.play<br>åï¼Œjavaä¼šæŠ¥é”™ä¸º<br>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: Hello (wrong name: antlrtest&#47;Hello)<br><br>æ–‡ä»¶ä½ç½®æ˜¯ `PlayWithCompiler&#47;lab&#47;antlrtest&#47;src&#47;antlrtest`<br>java : openjdk version &quot;1.8.0_222&quot; 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-26 10:32:36</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ˜¯CLASSPATHçš„é—®é¢˜ã€‚<br>è®¾ç½®CLASSPATHåŒ…å«å½“å‰ç›®å½•ï¼Œä¹Ÿå°±æ˜¯.<br>åˆ°Hello.javaçš„ç›®å½•ä¸‹å»è¿è¡Œã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Giacomo  2019-08-26 09:52:35
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œæˆ‘çš„ç”µè„‘æ˜¯win10ç³»ç»Ÿï¼Œä½†æˆ‘å®‰è£…äº†Ubuntuå­ç³»ç»Ÿã€‚æˆ‘æƒ³çŸ¥é“ç›´æ¥ç”¨<br>`sudo apt remove pccts` å’Œ `sudo apt install grun` å®‰è£…çš„æ˜¯æˆ‘æ‰€éœ€è¦çš„å‘½ä»¤å—ï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-26 10:31:07</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">antlrçš„å®‰è£…ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps:&#47;&#47;github.com&#47;antlr&#47;antlr4&#47;blob&#47;master&#47;doc&#47;getting-started.md<br>åŸºæœ¬ä¸Šå°±æ˜¯ï¼š<br>1.å®‰è£…javaç¯å¢ƒ<br>2.ä¸‹è½½jaråŒ…ï¼›<br>3.è®¾ç½®CLASSPATH<br>4.(å¯é€‰)è®¾ç½®ä¸¤ä¸ªshellçš„åˆ«åï¼Œè¿™æ ·æ‰“å‘½ä»¤å°‘æ•²ç‚¹å­—ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å®‰æ’  2019-08-26 09:24:56
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ğŸ‘ 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>