<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>07-ç¼–è¯‘å™¨å‰ç«¯å·¥å…·ï¼ˆäºŒï¼‰ï¼šç”¨Antlré‡æ„è„šæœ¬è¯­è¨€</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>07-ç¼–è¯‘å™¨å‰ç«¯å·¥å…·ï¼ˆäºŒï¼‰ï¼šç”¨Antlré‡æ„è„šæœ¬è¯­è¨€</h1>
<p>ä¸Šä¸€è®²ï¼Œæˆ‘å¸¦ä½ ç”¨Antlrç”Ÿæˆäº†è¯æ³•åˆ†æå™¨å’Œè¯­æ³•åˆ†æå™¨ï¼Œä¹Ÿå¸¦ä½ åˆ†æäº†ï¼Œè·Ÿä¸€é—¨æˆç†Ÿçš„è¯­è¨€ç›¸æ¯”ï¼Œåœ¨è¯æ³•è§„åˆ™å’Œè¯­æ³•è§„åˆ™æ–¹é¢è¦åšçš„ä¸€äº›å·¥ä½œã€‚</p><p>åœ¨è¯æ³•æ–¹é¢ï¼Œæˆ‘ä»¬å‚è€ƒJavaçš„è¯æ³•è§„åˆ™æ–‡ä»¶ï¼Œå½¢æˆäº†ä¸€ä¸ªCommonLexer.g4è¯æ³•æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†æ›´å®Œå–„çš„å­—ç¬¦ä¸²å­—é¢é‡çš„è¯æ³•è§„åˆ™ï¼Œè¿˜è®²åˆ°è¦é€šè¿‡è§„åˆ™å£°æ˜çš„å‰åé¡ºåºæ¥è§£å†³ä¼˜å…ˆçº§é—®é¢˜ï¼Œæ¯”å¦‚å…³é”®å­—çš„è§„åˆ™ä¸€å®šè¦åœ¨æ ‡è¯†ç¬¦çš„å‰é¢ã€‚</p><p>ç›®å‰æ¥è®²ï¼Œæˆ‘ä»¬å·²ç»å®Œå–„äº†è¯æ³•è§„åˆ™ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘ä»¬æ¥è¡¥å……å’Œå®Œå–„ä¸€ä¸‹è¯­æ³•è§„åˆ™ï¼Œçœ‹ä¸€çœ‹æ€æ ·ç”¨æœ€é«˜æ•ˆçš„é€Ÿåº¦ï¼Œå®Œå–„è¯­æ³•åŠŸèƒ½ã€‚æ¯”å¦‚ä¸€å¤©ä¹‹å†…ï¼Œæˆ‘ä»¬æ˜¯å¦èƒ½ä¸ºæŸä¸ªéœ€è¦ç¼–è¯‘æŠ€æœ¯çš„é¡¹ç›®å®ç°ä¸€ä¸ªå¯è¡Œæ€§åŸå‹ï¼Ÿ</p><p>è€Œä¸”ï¼Œæˆ‘è¿˜ä¼šå¸¦ä½ ç†Ÿæ‚‰ä¸€ä¸‹å¸¸è§è¯­æ³•è®¾è®¡çš„æœ€ä½³å®è·µã€‚è¿™æ ·å½“åé¢çš„é¡¹ç›®éœ€è¦ç¼–è¯‘æŠ€æœ¯åšæ”¯æ’‘æ—¶ï¼Œä½ å°±ä¼šå¾ˆå¿«ä¸Šæ‰‹ï¼Œåšå‡ºæˆç»©äº†ï¼</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆæŠŠè¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™æ¢³ç†ä¸€éï¼Œè®©å®ƒè¾¾åˆ°æˆç†Ÿè¯­è¨€çš„çº§åˆ«ï¼Œç„¶åå†æŠŠè¯­å¥æ¢³ç†ä¸€éï¼ŒåŒ…æ‹¬å‰é¢å‡ ä¹æ²¡æœ‰è®²è¿‡çš„æµç¨‹æ§åˆ¶è¯­å¥ã€‚æœ€åå†å‡çº§è§£é‡Šå™¨ï¼Œç”¨Visitoræ¨¡å¼å®ç°å¯¹ASTçš„è®¿é—®ï¼Œè¿™æ ·æˆ‘ä»¬çš„ä»£ç ä¼šæ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“ç»´æŠ¤äº†ã€‚</p><p>å¥½äº†ï¼Œè®©æˆ‘ä»¬æ­£å¼è¿›å…¥è¯¾ç¨‹ï¼Œå…ˆå°†è¡¨è¾¾å¼çš„è¯­æ³•å®Œå–„ä¸€ä¸‹å§ï¼</p><h2>å®Œå–„è¡¨è¾¾å¼ï¼ˆExpressionï¼‰çš„è¯­æ³•</h2><p>åœ¨â€œ<a href="https://time.geekbang.org/column/article/126910">06 | ç¼–è¯‘å™¨å‰ç«¯å·¥å…·ï¼ˆä¸€ï¼‰ï¼šç”¨Antlrç”Ÿæˆè¯æ³•ã€è¯­æ³•åˆ†æå™¨</a>â€ä¸­ï¼Œæˆ‘æåˆ°Antlrèƒ½è‡ªåŠ¨å¤„ç†å·¦é€’å½’çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨å†™è¡¨è¾¾å¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¤§èƒ†åœ°å†™æˆå·¦é€’å½’çš„å½¢å¼ï¼ŒèŠ‚çœæ—¶é—´ã€‚</p><!-- [[[read_end]]] --><p>ä½†è¿™æ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ä¸ºæ¯ä¸ªè¿ç®—å†™ä¸€ä¸ªè§„åˆ™ï¼Œé€»è¾‘è¿ç®—å†™å®Œäº†è¦å†™åŠ æ³•è¿ç®—ï¼ŒåŠ æ³•è¿ç®—å†™å®Œäº†å†™ä¹˜æ³•è¿ç®—ï¼Œè¿™æ ·æ‰èƒ½å®ç°å¯¹ä¼˜å…ˆçº§çš„æ”¯æŒï¼Œè¿˜æ˜¯æœ‰äº›éº»çƒ¦ã€‚</p><p>å…¶å®ï¼ŒAntlrèƒ½è¿›ä¸€æ­¥åœ°å¸®åŠ©æˆ‘ä»¬ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„è¿ç®—éƒ½ç”¨ä¸€ä¸ªè¯­æ³•è§„åˆ™æ¥æ¶µç›–ï¼Œç„¶åç”¨æœ€ç®€æ´çš„æ–¹å¼æ”¯æŒè¡¨è¾¾å¼çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§ã€‚åœ¨æˆ‘å»ºç«‹çš„PlayScript.g4è¯­æ³•è§„åˆ™æ–‡ä»¶ä¸­ï¼Œåªç”¨äº†ä¸€å°æ®µä»£ç å°±å°†æ‰€æœ‰çš„è¡¨è¾¾å¼è§„åˆ™æè¿°å®Œäº†ï¼š</p><pre><code>expression
    : primary
    | expression bop='.'
      ( IDENTIFIER
      | functionCall
      | THIS
      )
    | expression '[' expression ']'
    | functionCall
    | expression postfix=('++' | '--')
    | prefix=('+'|'-'|'++'|'--') expression
    | prefix=('~'|'!') expression
    | expression bop=('*'|'/'|'%') expression  
    | expression bop=('+'|'-') expression 
    | expression ('&lt;' '&lt;' | '&gt;' '&gt;' '&gt;' | '&gt;' '&gt;') expression
    | expression bop=('&lt;=' | '&gt;=' | '&gt;' | '&lt;') expression
    | expression bop=INSTANCEOF typeType
    | expression bop=('==' | '!=') expression
    | expression bop='&amp;' expression
    | expression bop='^' expression
    | expression bop='|' expression
    | expression bop='&amp;&amp;' expression
    | expression bop='||' expression
    | expression bop='?' expression ':' expression
    | &lt;assoc=right&gt; expression
      bop=('=' | '+=' | '-=' | '*=' | '/=' | '&amp;=' | '|=' | '^=' | '&gt;&gt;=' | '&gt;&gt;&gt;=' | '&lt;&lt;=' | '%=')
      expression
    ;
</code></pre><p>è¿™ä¸ªæ–‡ä»¶å‡ ä¹åŒ…æ‹¬äº†æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰çš„è¡¨è¾¾å¼è§„åˆ™ï¼ŒåŒ…æ‹¬å‡ ä¹æ²¡æåˆ°çš„ç‚¹ç¬¦å·è¡¨è¾¾å¼ã€é€’å¢å’Œé€’å‡è¡¨è¾¾å¼ã€æ•°ç»„è¡¨è¾¾å¼ã€ä½è¿ç®—è¡¨è¾¾å¼è§„åˆ™ç­‰ï¼Œå·²ç»å¾ˆå®Œå–„äº†ã€‚</p><p>é‚£ä¹ˆå®ƒæ˜¯æ€æ ·æ”¯æŒä¼˜å…ˆçº§çš„å‘¢ï¼ŸåŸæ¥ï¼Œä¼˜å…ˆçº§æ˜¯é€šè¿‡å³ä¾§ä¸åŒäº§ç”Ÿå¼çš„é¡ºåºå†³å®šçš„ã€‚åœ¨æ ‡å‡†çš„ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ä¸­ï¼Œäº§ç”Ÿå¼çš„é¡ºåºæ˜¯æ— å…³çš„ï¼Œä½†åœ¨å…·ä½“çš„ç®—æ³•ä¸­ï¼Œä¼šæŒ‰ç…§ç¡®å®šçš„é¡ºåºæ¥å°è¯•å„ä¸ªäº§ç”Ÿå¼ã€‚</p><p>ä½ ä¸å¯èƒ½ä¸€ä¼šå„¿æŒ‰è¿™ä¸ªé¡ºåºï¼Œä¸€ä¼šå„¿æŒ‰é‚£ä¸ªé¡ºåºã€‚ç„¶è€Œï¼ŒåŒæ ·çš„æ–‡æ³•ï¼ŒæŒ‰ç…§ä¸åŒçš„é¡ºåºæ¥æ¨å¯¼çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ASTå¯èƒ½æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œè¿™ä¸€ç‚¹ä»æ–‡æ³•ç†è®ºçš„è§’åº¦ï¼Œæ˜¯æ— æ³•æ¥å—çš„ï¼Œä½†ä»å®è·µçš„è§’åº¦ï¼Œæ˜¯å¯ä»¥æ¥å—çš„ã€‚æ¯”å¦‚LLæ–‡æ³•å’ŒLRæ–‡æ³•çš„æ¦‚å¿µï¼Œæ˜¯æŒ‡è¿™ä¸ªæ–‡æ³•åœ¨LLç®—æ³•æˆ–LRç®—æ³•ä¸‹æ˜¯å·¥ä½œæ­£å¸¸çš„ã€‚åˆæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰åšåŠ æ³•è¿ç®—çš„é‚£ä¸ªæ–‡æ³•ï¼Œå°±æ˜¯é€’å½’é¡¹æ”¾åœ¨å³è¾¹çš„é‚£ä¸ªï¼Œåœ¨é€’å½’ä¸‹é™ç®—æ³•ä¸­ä¼šå¼•èµ·ç»“åˆæ€§çš„é”™è¯¯ï¼Œä½†æ˜¯å¦‚æœç”¨LRç®—æ³•ï¼Œå°±å®Œå…¨æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œç”Ÿæˆçš„ASTå®Œå…¨æ­£ç¡®ã€‚</p><pre><code>additiveExpression
    :   IntLiteral
    |   IntLiteral Plus additiveExpression
    ;
</code></pre><p>Antlrçš„è¿™ä¸ªè¯­æ³•å®é™…ä¸Šæ˜¯æŠŠäº§ç”Ÿå¼çš„é¡ºåºèµ‹äºˆäº†é¢å¤–çš„å«ä¹‰ï¼Œç”¨æ¥è¡¨ç¤ºä¼˜å…ˆçº§ï¼Œæä¾›ç»™ç®—æ³•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¯´è¿™äº›æ–‡æ³•æ˜¯Antlræ–‡æ³•ï¼Œå› ä¸ºæ˜¯ä¸Antlrçš„ç®—æ³•ç›¸åŒ¹é…çš„ã€‚å½“ç„¶ï¼Œè¿™åªæ˜¯æˆ‘èµ·çš„ä¸€ä¸ªåå­—ï¼Œæ–¹ä¾¿ä½ ç†è§£ï¼Œå…å¾—ä½ äº§ç”Ÿå›°æ‰°ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹Antlræ˜¯å¦‚ä½•ä¾æ®è¿™ä¸ªè¯­æ³•è§„åˆ™å®ç°ç»“åˆæ€§çš„ã€‚åœ¨è¯­æ³•æ–‡ä»¶ä¸­ï¼ŒAntlrå¯¹äºèµ‹å€¼è¡¨è¾¾å¼åšäº†&lt;assoc=right&gt;çš„å±æ€§æ ‡æ³¨ï¼Œè¯´æ˜èµ‹å€¼è¡¨è¾¾å¼æ˜¯å³ç»“åˆçš„ã€‚å¦‚æœä¸æ ‡æ³¨ï¼Œå°±æ˜¯å·¦ç»“åˆçš„ï¼Œäº¤ç»™Antlrå®ç°äº†ï¼</p><p>æˆ‘ä»¬ä¸å¦¨ç»§ç»­çŒœæµ‹ä¸€ä¸‹Antlrå†…éƒ¨çš„å®ç°æœºåˆ¶ã€‚æˆ‘ä»¬å·²ç»åˆ†æäº†ä¿è¯æ­£ç¡®çš„ç»“åˆæ€§çš„ç®—æ³•ï¼Œæ¯”å¦‚æŠŠé€’å½’è½¬åŒ–æˆå¾ªç¯ï¼Œç„¶ååœ¨æ„é€ ASTæ—¶ï¼Œç¡®å®šæ­£ç¡®çš„çˆ¶å­èŠ‚ç‚¹å…³ç³»ã€‚é‚£ä¹ˆAntlræ˜¯ä¸æ˜¯ä¹Ÿé‡‡ç”¨äº†è¿™æ ·çš„æ€è·¯å‘¢ï¼Ÿæˆ–è€…è¯´è¿˜æœ‰å…¶ä»–æ–¹æ³•ï¼Ÿä½ å¯ä»¥å»çœ‹çœ‹Antlrç”Ÿæˆçš„ä»£ç éªŒè¯ä¸€ä¸‹ã€‚</p><p>åœ¨æ€è€ƒè¿™ä¸ªé—®é¢˜çš„åŒæ—¶ä½ ä¼šå‘ç°ï¼Œ<strong>å­¦ä¹ åŸç†æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</strong>å› ä¸ºå½“ä½ é¢å¯¹Antlrè¿™æ ·å·¥å…·æ—¶ï¼Œèƒ½å¤ŸçŒœå‡ºå®ƒçš„å®ç°æœºåˆ¶ã€‚</p><p>é€šè¿‡è¿™ä¸ªç®€åŒ–çš„ç®—æ³•ï¼ŒASTè¢«æˆåŠŸç®€åŒ–ï¼Œä¸å†æœ‰åŠ æ³•èŠ‚ç‚¹ã€ä¹˜æ³•èŠ‚ç‚¹ç­‰å„ç§ä¸åŒçš„èŠ‚ç‚¹ï¼Œè€Œæ˜¯ç»Ÿä¸€ä¸ºè¡¨è¾¾å¼èŠ‚ç‚¹ã€‚ä½ å¯èƒ½ä¼šé—®äº†ï¼šâ€œå¦‚æœéƒ½æ˜¯åŒæ ·çš„è¡¨è¾¾å¼èŠ‚ç‚¹ï¼Œæ€ä¹ˆåœ¨è§£æå™¨é‡ŒæŠŠå®ƒä»¬åŒºåˆ†å¼€å‘¢ï¼Ÿæ€ä¹ˆçŸ¥é“å“ªä¸ªèŠ‚ç‚¹æ˜¯åšåŠ æ³•è¿ç®—æˆ–ä¹˜æ³•è¿ç®—å‘¢ï¼Ÿâ€</p><p>å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾ä¸€ä¸‹å½“å‰èŠ‚ç‚¹æœ‰æ²¡æœ‰æŸä¸ªè¿ç®—ç¬¦çš„Tokenã€‚æ¯”å¦‚ï¼Œå¦‚æœå‡ºç°äº†æˆ–è€…è¿ç®—çš„Tokenï¼ˆâ€œ||â€ï¼‰ï¼Œå°±æ˜¯åšé€»è¾‘æˆ–è¿ç®—ï¼Œè€Œä¸”è¯­æ³•é‡Œé¢çš„bop=ã€postfix=ã€prefix=è¿™äº›å±æ€§ï¼Œä½œä¸ºæŸäº›è¿ç®—ç¬¦Tokençš„åˆ«åï¼Œä¹Ÿä¼šæˆä¸ºè¡¨è¾¾å¼èŠ‚ç‚¹çš„å±æ€§ã€‚é€šè¿‡æŸ¥è¯¢è¿™äº›å±æ€§çš„å€¼ï¼Œä½ å¯ä»¥å¾ˆå¿«ç¡®å®šå½“å‰è¿ç®—çš„ç±»å‹ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å½»åº•å®Œæˆäº†è¡¨è¾¾å¼çš„è¯­æ³•å·¥ä½œï¼Œå¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°åœ¨è„šæœ¬è¯­è¨€é‡Œä½¿ç”¨å„ç§è¡¨è¾¾å¼ï¼ŒæŠŠç²¾åŠ›æ”¾åœ¨å®Œå–„å„ç±»è¯­å¥çš„è¯­æ³•å·¥ä½œä¸Šäº†ã€‚</p><h2>å®Œå–„å„ç±»è¯­å¥ï¼ˆStatementï¼‰çš„è¯­æ³•</h2><p>æˆ‘å…ˆå¸¦ä½ åˆ†æä¸€ä¸‹PlayScript.g4æ–‡ä»¶ä¸­è¯­å¥çš„è§„åˆ™ï¼š</p><pre><code>statement
    : blockLabel=block
    | IF parExpression statement (ELSE statement)?
    | FOR '(' forControl ')' statement
    | WHILE parExpression statement
    | DO statement WHILE parExpression ';'
    | SWITCH parExpression '{' switchBlockStatementGroup* switchLabel* '}'
    | RETURN expression? ';'
    | BREAK IDENTIFIER? ';'
    | SEMI
    | statementExpression=expression ';'
    ;
</code></pre><p>åŒè¡¨è¾¾å¼ä¸€æ ·ï¼Œä¸€ä¸ªstatementè§„åˆ™å°±å¯ä»¥æ¶µç›–å„ç±»å¸¸ç”¨è¯­å¥ï¼ŒåŒ…æ‹¬ifè¯­å¥ã€forå¾ªç¯è¯­å¥ã€whileå¾ªç¯è¯­å¥ã€switchè¯­å¥ã€returnè¯­å¥ç­‰ç­‰ã€‚è¡¨è¾¾å¼åé¢åŠ ä¸€ä¸ªåˆ†å·ï¼Œä¹Ÿæ˜¯ä¸€ç§è¯­å¥ï¼Œå«åšè¡¨è¾¾å¼è¯­å¥ã€‚</p><p>ä»è¯­æ³•åˆ†æçš„éš¾åº¦æ¥çœ‹ï¼Œä¸Šé¢è¿™äº›è¯­å¥çš„è¯­æ³•æ¯”è¡¨è¾¾å¼çš„è¯­æ³•ç®€å•çš„å¤šï¼Œå·¦é€’å½’ã€ä¼˜å…ˆçº§å’Œç»“åˆæ€§çš„é—®é¢˜è¿™é‡Œéƒ½æ²¡æœ‰å‡ºç°ã€‚è¿™ä¹Ÿç®—å…ˆéš¾åæ˜“ï¼Œè‹¦å°½ç”˜æ¥äº†å§ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬åé¢è¦è®¾è®¡çš„å¾ˆå¤šè¯­æ³•ï¼Œéƒ½æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆå¤æ‚ã€‚</p><p>æ—¢ç„¶æˆ‘ä»¬å°åˆ°äº†ä¸€äº›ç”œå¤´ï¼Œä¸å¦‚è¶çƒ­æ‰“é“ï¼Œæ·±å…¥ç ”ç©¶ä¸€ä¸‹ifè¯­å¥å’Œforè¯­å¥ï¼Ÿçœ‹çœ‹æ€ä¹ˆå†™è¿™äº›è¯­å¥çš„è§„åˆ™ï¼Ÿå¤šåšè¿™æ ·çš„è®­ç»ƒï¼Œå†çœ‹åˆ°è¿™äº›è¯­å¥ï¼Œä½ çš„è„‘æµ·é‡Œå°±èƒ½é©¬ä¸Šåæ˜ å‡ºå®ƒçš„è¯­æ³•è§„åˆ™ã€‚</p><h4>1.ç ”ç©¶ä¸€ä¸‹ifè¯­å¥</h4><p>åœ¨Cå’ŒJavaç­‰è¯­è¨€ä¸­ï¼Œifè¯­å¥é€šå¸¸å†™æˆä¸‹é¢çš„æ ·å­ï¼š</p><pre><code>if (condition)
  åšä¸€ä»¶äº‹æƒ…;
else
  åšå¦ä¸€ä»¶äº‹æƒ…;
</code></pre><p>ä½†æ›´å¤šæƒ…å†µä¸‹ï¼Œifå’Œelseåé¢æ˜¯èŠ±æ‹¬å·èµ·æ­¢çš„ä¸€ä¸ªè¯­å¥å—ï¼Œæ¯”å¦‚ï¼š</p><pre><code>if (condition){
  åšä¸€äº›äº‹æƒ…ï¼›
}
else{
  åšå¦ä¸€äº›äº‹æƒ…ï¼›
}
</code></pre><p>å®ƒçš„è¯­æ³•è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>statement : 
          ...
          | IF parExpression statement (ELSE statement)? 
          ...
          ;
parExpression : '(' expression ')';
</code></pre><p>æˆ‘ä»¬ç”¨äº†IFå’ŒELSEè¿™ä¸¤ä¸ªå…³é”®å­—ï¼Œä¹Ÿå¤ç”¨äº†å·²ç»å®šä¹‰å¥½çš„è¯­å¥è§„åˆ™å’Œè¡¨è¾¾å¼è§„åˆ™ã€‚ä½ çœ‹ï¼Œè¯­å¥è§„åˆ™å’Œè¡¨è¾¾å¼è§„åˆ™ä¸€æ—¦è®¾è®¡å®Œæ¯•ï¼Œå°±å¯ä»¥è¢«å…¶ä»–è¯­æ³•è§„åˆ™å¤ç”¨ï¼Œå¤šä¹ˆçœå¿ƒï¼</p><p>ä½†æ˜¯ifè¯­å¥ä¹Ÿæœ‰è®©äººä¸çœå¿ƒçš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¼šæ¶‰åŠåˆ°äºŒä¹‰æ€§æ–‡æ³•é—®é¢˜ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å€Ÿifè¯­å¥ï¼Œåˆ†æä¸€ä¸‹äºŒä¹‰æ€§æ–‡æ³•è¿™ä¸ªç°è±¡ã€‚</p><h4>2.è§£å†³äºŒä¹‰æ€§æ–‡æ³•</h4><p>å­¦è®¡ç®—æœºè¯­è¨€çš„æ—¶å€™ï¼Œæåˆ°ifè¯­å¥ï¼Œä¼šç‰¹åˆ«æä¸€ä¸‹åµŒå¥—ifè¯­å¥å’Œæ‚¬æŒ‚elseçš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>if (a &gt; b)
if (c &gt; d)
åšä¸€äº›äº‹æƒ…ï¼›
else
åšå¦å¤–ä¸€äº›äº‹æƒ…ï¼›
</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘æ•…æ„å–æ¶ˆäº†ä»£ç çš„ç¼©è¿›ã€‚é‚£ä¹ˆï¼Œä½ èƒ½ä¸èƒ½çœ‹å‡ºelseæ˜¯è·Ÿå“ªä¸ªifé…å¯¹çš„å‘¢ï¼Ÿ</p><p>ä¸€æ—¦ä½ è¯­æ³•è§„åˆ™å†™å¾—ä¸å¤Ÿå¥½ï¼Œå°±å¾ˆå¯èƒ½å½¢æˆäºŒä¹‰æ€§ï¼Œä¹Ÿå°±æ˜¯ç”¨åŒä¸€ä¸ªè¯­æ³•è§„åˆ™å¯ä»¥æ¨å¯¼å‡ºä¸¤ä¸ªä¸åŒçš„å¥å­ï¼Œæˆ–è€…è¯´ç”Ÿæˆä¸¤ä¸ªä¸åŒçš„ASTã€‚è¿™ç§æ–‡æ³•å«åšäºŒä¹‰æ€§æ–‡æ³•ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§å†™æ³•ï¼š</p><pre><code>stmt -&gt; if expr stmt
      | if expr stmt else stmt
      | other
</code></pre><p>æŒ‰ç…§è¿™ä¸ªè¯­æ³•è§„åˆ™ï¼Œå…ˆé‡‡ç”¨ç¬¬ä¸€æ¡äº§ç”Ÿå¼æ¨å¯¼æˆ–å…ˆé‡‡ç”¨ç¬¬äºŒæ¡äº§ç”Ÿå¼æ¨å¯¼ï¼Œä¼šå¾—åˆ°ä¸åŒçš„ASTã€‚å·¦è¾¹çš„è¿™æ£µASTä¸­ï¼Œelseè·Ÿç¬¬äºŒä¸ªifé…å¯¹ï¼›å³è¾¹çš„è¿™æ£µASTä¸­ï¼Œelseè·Ÿç¬¬ä¸€ä¸ªifé…å¯¹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/58/69/589ae549366701286417475fbc361469.jpg" alt=""></p><p>å¤§å¤šæ•°é«˜çº§è¯­è¨€åœ¨è§£æè¿™ä¸ªç¤ºä¾‹ä»£ç æ—¶éƒ½ä¼šäº§ç”Ÿç¬¬ä¸€ä¸ªASTï¼Œå³elseè·Ÿæœ€é‚»è¿‘çš„ifé…å¯¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™æ®µå¸¦ç¼©è¿›çš„ä»£ç è¡¨è¾¾çš„æ„æ€ï¼š</p><pre><code>if (a &gt; b)
  if (c &gt; d)
    åšä¸€äº›äº‹æƒ…ï¼›
  else
    åšå¦å¤–ä¸€äº›äº‹æƒ…ï¼›
</code></pre><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•æŠŠè¯­æ³•å†™æˆæ²¡æœ‰äºŒä¹‰æ€§çš„å‘¢ï¼Ÿå½“ç„¶æœ‰äº†ã€‚</p><pre><code>stmt -&gt; fullyMatchedStmt | partlyMatchedStmt
fullyMatchedStmt -&gt; if expr fullyMatchedStmt else fullyMatchedStmt
                   | other
partlyMatchedStmt -&gt; if expr stmt
                   | if expr fullyMatchedStmt else partlyMatchedStmt
</code></pre><p>æŒ‰ç…§ä¸Šé¢çš„è¯­æ³•è§„åˆ™ï¼Œåªæœ‰å”¯ä¸€çš„æ¨å¯¼æ–¹å¼ï¼Œä¹Ÿåªèƒ½ç”Ÿæˆå”¯ä¸€çš„ASTï¼š</p><p><img src="https://static001.geekbang.org/resource/image/49/08/493e98268dac0e100ca745f6e379fe08.jpg" alt=""></p><p>å…¶ä¸­ï¼Œè§£æç¬¬ä¸€ä¸ªifè¯­å¥æ—¶åªèƒ½åº”ç”¨partlyMatchedStmtè§„åˆ™ï¼Œè§£æç¬¬äºŒä¸ªifè¯­å¥æ—¶ï¼Œåªèƒ½é€‚ç”¨fullyMatchedStmtè§„åˆ™ã€‚</p><p>è¿™æ—¶ï¼Œæˆ‘ä»¬å°±çŸ¥é“å¯ä»¥é€šè¿‡æ”¹å†™è¯­æ³•è§„åˆ™æ¥è§£å†³äºŒä¹‰æ€§æ–‡æ³•ã€‚è‡³äºæ€ä¹ˆæ”¹å†™è§„åˆ™ï¼Œç¡®å®ä¸åƒå·¦é€’å½’é‚£æ ·æœ‰æ¸…æ™°çš„å¥—è·¯ï¼Œä½†æ˜¯å¯ä»¥å¤šå€Ÿé‰´æˆç†Ÿçš„ç»éªŒã€‚</p><p>å†è¯´å›æˆ‘ä»¬ç»™Antlrå®šä¹‰çš„è¯­æ³•ï¼Œè¿™ä¸ªè¯­æ³•ä¼¼ä¹å¹¶ä¸å¤æ‚ï¼Œæ€ä¹ˆå°±èƒ½ç¡®ä¿ä¸å‡ºç°äºŒä¹‰æ€§é—®é¢˜å‘¢ï¼Ÿå› ä¸ºAntlrè§£æè¯­æ³•æ—¶ç”¨åˆ°çš„æ˜¯LLç®—æ³•ã€‚</p><p>LLç®—æ³•æ˜¯ä¸€ä¸ªæ·±åº¦ä¼˜å…ˆçš„ç®—æ³•ï¼Œæ‰€ä»¥åœ¨è§£æåˆ°ç¬¬ä¸€ä¸ªstatementæ—¶ï¼Œå°±ä¼šå»ºç«‹ä¸‹ä¸€çº§çš„ifèŠ‚ç‚¹ï¼Œåœ¨ä¸‹ä¸€çº§èŠ‚ç‚¹é‡Œä¼šæŠŠelseå­å¥è§£ææ‰ã€‚å¦‚æœAntlrä¸ç”¨LLç®—æ³•ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚è¿™å†æ¬¡éªŒè¯äº†æˆ‘ä»¬å‰é¢è¯´çš„é‚£ä¸ªçŸ¥è¯†ç‚¹ï¼šæ–‡æ³•è¦ç»å¸¸å’Œè§£æç®—æ³•é…åˆã€‚</p><p>åˆ†æå®Œifè¯­å¥ï¼Œå¹¶å€Ÿå®ƒè¯´æ˜äº†äºŒä¹‰æ€§æ–‡æ³•ä¹‹åï¼Œæˆ‘ä»¬å†é’ˆå¯¹forè¯­å¥åšä¸€ä¸ªæ¡ˆä¾‹ç ”ç©¶ã€‚</p><h4>3.ç ”ç©¶ä¸€ä¸‹forè¯­å¥</h4><p>forè¯­å¥ä¸€èˆ¬å†™æˆä¸‹é¢çš„æ ·å­ï¼š</p><pre><code>for (int i = 0; i &lt; 10; i++){
  println(i);
}
</code></pre><p>ç›¸å…³çš„è¯­æ³•è§„åˆ™å¦‚ä¸‹ï¼š</p><pre><code>statement : 
         ...
          | FOR '(' forControl ')' statement
         ...
          ;

forControl 
          : forInit? ';' expression? ';' forUpdate=expressionList?
          ;

forInit 
          : variableDeclarators 
          | expressionList 
          ;

expressionList
          : expression (',' expression)*
          ;
</code></pre><p>ä»ä¸Šé¢çš„è¯­æ³•è§„åˆ™ä¸­çœ‹åˆ°ï¼Œforè¯­å¥å½’æ ¹åˆ°åº•æ˜¯ç”±è¯­å¥ã€è¡¨è¾¾å¼å’Œå˜é‡å£°æ˜æ„æˆçš„ã€‚ä»£ç ä¸­çš„forè¯­å¥ï¼Œè§£æåå½¢æˆçš„ASTå¦‚ä¸‹ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/2a/0a/2aafdb592342d5d694b32a347d4c430a.jpg" alt=""></p><p>ç†Ÿæ‚‰äº†forè¯­å¥çš„è¯­æ³•ä¹‹åï¼Œæˆ‘æƒ³æä¸€ä¸‹è¯­å¥å—ï¼ˆblockï¼‰ã€‚åœ¨ifè¯­å¥å’Œforè¯­å¥ä¸­ï¼Œä¼šç”¨åˆ°å®ƒï¼Œæ‰€ä»¥æˆ‘æå¸¦ç€æŠŠè¯­å¥å—çš„è¯­æ³•æ„æˆå†™äº†ä¸€ä¸‹ï¼Œä¾›ä½ å‚è€ƒï¼š</p><pre><code>block
    : '{' blockStatements '}'
    ;

blockStatements
    : blockStatement*
    ;

blockStatement
    : variableDeclarators ';'     //å˜é‡å£°æ˜
    | statement
    | functionDeclaration         //å‡½æ•°å£°æ˜
    | classDeclaration            //ç±»å£°æ˜
    ;
</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªç›¸å½“ä¸é”™çš„è¯­æ³•ä½“ç³»ï¼Œé™¤äº†è¦æ”¾åˆ°åé¢å»è®²çš„å‡½æ•°ã€ç±»æœ‰å…³çš„è¯­æ³•ä¹‹å¤–ï¼Œæˆ‘ä»¬å‡ ä¹å®Œæˆäº†playscriptçš„æ‰€æœ‰çš„è¯­æ³•è®¾è®¡å·¥ä½œã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†å‡çº§ä¸€ä¸‹è„šæœ¬è§£é‡Šå™¨ï¼Œè®©å®ƒèƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„è¯­æ³•ï¼ŒåŒæ—¶é€šè¿‡ä½¿ç”¨Visitoræ¨¡å¼ï¼Œè®©ä»£ç ç»“æ„æ›´åŠ å®Œå–„ã€‚</p><h2>ç”¨Vistoræ¨¡å¼å‡çº§è„šæœ¬è§£é‡Šå™¨</h2><p>æˆ‘ä»¬åœ¨çº¯æ‰‹å·¥ç¼–å†™çš„è„šæœ¬è¯­è¨€è§£é‡Šå™¨é‡Œï¼Œç”¨äº†ä¸€ä¸ªevaluate()æ–¹æ³•è‡ªä¸Šè€Œä¸‹åœ°éå†äº†æ•´æ£µæ ‘ã€‚éšç€è¦å¤„ç†çš„è¯­æ³•è¶Šæ¥è¶Šå¤šï¼Œè¿™ä¸ªæ–¹æ³•çš„ä»£ç é‡ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸ä¾¿äºç»´æŠ¤ã€‚è€ŒVisitorè®¾è®¡æ¨¡å¼é’ˆå¯¹æ¯ä¸€ç§ASTèŠ‚ç‚¹ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•æ¥è´Ÿè´£å¤„ç†ï¼Œèƒ½å¤Ÿè®©ä»£ç æ›´æ¸…æ™°ï¼Œä¹Ÿæ›´ä¾¿äºç»´æŠ¤ã€‚</p><p>Antlrèƒ½å¸®æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªVisitorå¤„ç†æ¨¡å¼çš„æ¡†æ¶ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><pre><code>antlr -visitor PlayScript.g4
</code></pre><p>-visitorå‚æ•°å‘Šè¯‰Antlrç”Ÿæˆä¸‹é¢ä¸¤ä¸ªæ¥å£å’Œç±»ï¼š</p><pre><code>public interface PlayScriptVisitor&lt;T&gt; extends ParseTreeVisitor&lt;T&gt; {...}

public class PlayScriptBaseVisitor&lt;T&gt; extends AbstractParseTreeVisitor&lt;T&gt; implements PlayScriptVisitor&lt;T&gt; {...}
</code></pre><p>åœ¨PlayScriptBaseVisitorä¸­ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤švisitXXX()è¿™æ ·çš„æ–¹æ³•ï¼Œæ¯ä¸€ç§ASTèŠ‚ç‚¹éƒ½å¯¹åº”ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p><pre><code>@Override public T visitPrimitiveType(PlayScriptParser.PrimitiveTypeContext ctx) {...}
</code></pre><p>å…¶ä¸­æ³›å‹&lt; T &gt;æŒ‡çš„æ˜¯è®¿é—®æ¯ä¸ªèŠ‚ç‚¹æ—¶è¿”å›çš„æ•°æ®çš„ç±»å‹ã€‚åœ¨æˆ‘ä»¬æ‰‹å·¥ç¼–å†™çš„ç‰ˆæœ¬é‡Œï¼Œå½“æ—¶åªå¤„ç†æ•´æ•°ï¼Œæ‰€ä»¥è¿”å›å€¼ä¸€å¾‹ç”¨Integerï¼Œç°åœ¨æˆ‘ä»¬å®ç°çš„ç‰ˆæœ¬è¦é«˜çº§ä¸€ç‚¹ï¼ŒASTèŠ‚ç‚¹å¯èƒ½è¿”å›å„ç§ç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚ï¼š</p><ul>
<li>æµ®ç‚¹å‹è¿ç®—çš„æ—¶å€™ï¼Œä¼šè¿”å›æµ®ç‚¹æ•°ï¼›</li>
<li>å­—ç¬¦ç±»å‹è¿ç®—çš„æ—¶å€™ï¼Œä¼šè¿”å›å­—ç¬¦å‹æ•°æ®ï¼›</li>
<li>è¿˜å¯èƒ½æ˜¯ç¨‹åºå‘˜è‡ªå·±è®¾è®¡çš„ç±»å‹ï¼Œå¦‚æŸä¸ªç±»çš„å®ä¾‹ã€‚</li>
</ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±è®©Visitorç»Ÿä¸€è¿”å›Objectç±»å‹å¥½äº†ï¼Œèƒ½å¤Ÿé€‚ç”¨äºå„ç§æƒ…å†µã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çš„Visitorå°±æ˜¯ä¸‹é¢çš„æ ·å­ï¼ˆæ³›å‹é‡‡ç”¨äº†Objectï¼‰ï¼š</p><pre><code>public class MyVisitor extends PlayScriptBaseVisitor&lt;Object&gt;{
  ...
}
</code></pre><p>è¿™æ ·ï¼Œåœ¨visitExpression()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å„ç§è¡¨è¾¾å¼æ±‚å€¼çš„ä»£ç ï¼Œæ¯”å¦‚ï¼ŒåŠ æ³•å’Œå‡æ³•è¿ç®—çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>public Object visitExpression(ExpressionContext ctx) {
        Object rtn = null;
        //äºŒå…ƒè¡¨è¾¾å¼
        if (ctx.bop != null &amp;&amp; ctx.expression().size() &gt;= 2) {
            Object left = visitExpression(ctx.expression(0));
            Object right = visitExpression(ctx.expression(1));
            ...
            Type type = cr.node2Type.get(ctx);//æ•°æ®ç±»å‹æ˜¯è¯­ä¹‰åˆ†æçš„æˆæœ

            switch (ctx.bop.getType()) {
            case PlayScriptParser.ADD:        //åŠ æ³•è¿ç®—
                rtn = add(leftObject, rightObject, type);
                break;
            case PlayScriptParser.SUB:        //å‡æ³•è¿ç®—
                rtn = minus(leftObject, rightObject, type);
                break;
            ...   
            }
        }
        ...
}
</code></pre><p>å…¶ä¸­ExpressionContextå°±æ˜¯ASTä¸­è¡¨è¾¾å¼çš„èŠ‚ç‚¹ï¼Œå«åšContextï¼Œæ„æ€æ˜¯ä½ èƒ½ä»ä¸­å–å‡ºè¿™ä¸ªèŠ‚ç‚¹æ‰€æœ‰çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬çˆ¶èŠ‚ç‚¹ã€å­èŠ‚ç‚¹ç­‰ã€‚å…¶ä¸­ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹çš„åç§°è·Ÿè¯­æ³•ä¸­çš„åç§°æ˜¯ä¸€è‡´çš„ï¼Œæ¯”å¦‚åŠ å‡æ³•è¯­æ³•è§„åˆ™æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><pre><code>expression bop=('+'|'-') expression 
</code></pre><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ExpressionContextçš„è¿™äº›æ–¹æ³•è®¿é—®å­èŠ‚ç‚¹ï¼š</p><pre><code>ctx.expression();     //è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«æ˜¯å·¦å³ä¸¤è¾¹çš„å­èŠ‚ç‚¹
ctx.expression(0);    //è¿ç®—ç¬¦å·¦è¾¹çš„è¡¨è¾¾å¼ï¼Œæ˜¯å¦ä¸€ä¸ªExpressionContextå¯¹è±¡
ctx.expression(1);    //äº‘ç®—æ³•å³è¾¹çš„è¡¨è¾¾å¼
ctx.bop();            //ä¸€ä¸ªTokenå¯¹è±¡ï¼Œå…¶ç±»å‹æ˜¯PlayScriptParser.ADDæˆ–SUB
ctx.ADD();            //è®¿é—®ADDç»ˆç»“ç¬¦ï¼Œå½“åšåŠ æ³•è¿ç®—çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•è¿”å›éç©ºå€¼
ctx.MINUS()ï¼›         //è®¿é—®MINUSç»ˆç»“ç¬¦
</code></pre><p>åœ¨åšåŠ æ³•è¿ç®—çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥é€’å½’çš„å¯¹ä¸‹çº§èŠ‚ç‚¹æ±‚å€¼ï¼Œå°±åƒä»£ç é‡Œçš„visitExpression(ctx.expression(0))ã€‚åŒæ ·ï¼Œè¦æƒ³è¿è¡Œæ•´ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬åªéœ€è¦visitæ ¹èŠ‚ç‚¹å°±è¡Œäº†ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œä¸ºæ¯ä¸ªASTèŠ‚ç‚¹å®ç°ä¸€ä¸ªvisitæ–¹æ³•ã€‚ä»è€ŒæŠŠæ•´ä¸ªè§£é‡Šå™¨å‡çº§ä¸€éã€‚é™¤äº†å®ç°è¡¨è¾¾å¼æ±‚å€¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸ºä»Šå¤©è®¾è®¡çš„ifè¯­å¥ã€forè¯­å¥æ¥ç¼–å†™æ±‚å€¼é€»è¾‘ã€‚ä»¥forè¯­å¥ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// åˆå§‹åŒ–éƒ¨åˆ†æ‰§è¡Œä¸€æ¬¡
if (forControl.forInit() != null) {
    rtn = visitForInit(forControl.forInit());
}

while (true) {
    Boolean condition = true; // å¦‚æœæ²¡æœ‰æ¡ä»¶åˆ¤æ–­éƒ¨åˆ†ï¼Œæ„å‘³ç€ä¸€ç›´å¾ªç¯
    if (forControl.expression() != null) {
        condition = (Boolean) visitExpression(forControl.expression());
    }

    if (condition) {
        // æ‰§è¡Œforçš„è¯­å¥ä½“
        rtn = visitStatement(ctx.statement(0));

        // æ‰§è¡ŒforUpdateï¼Œé€šå¸¸æ˜¯â€œi++â€è¿™æ ·çš„è¯­å¥ã€‚è¿™ä¸ªæ‰§è¡Œé¡ºåºä¸èƒ½å‡ºé”™ã€‚
        if (forControl.forUpdate != null) {
            visitExpressionList(forControl.forUpdate);
        }
    } else {
        break;
    }
}
</code></pre><p>ä½ éœ€è¦æ³¨æ„forè¯­å¥ä¸­å„ä¸ªéƒ¨åˆ†çš„æ‰§è¡Œè§„åˆ™ï¼Œæ¯”å¦‚ï¼š</p><ul>
<li>forInitéƒ¨åˆ†åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼›</li>
<li>æ¯æ¬¡å¾ªç¯éƒ½è¦æ‰§è¡Œä¸€æ¬¡forControlï¼Œçœ‹çœ‹æ˜¯å¦ç»§ç»­å¾ªç¯ï¼›</li>
<li>æ¥ç€æ‰§è¡Œforè¯­å¥ä¸­çš„è¯­å¥ä½“ï¼›</li>
<li>æœ€åæ‰§è¡ŒforUpdateéƒ¨åˆ†ï¼Œé€šå¸¸æ˜¯ä¸€äº›â€œi++â€è¿™æ ·çš„è¯­å¥ã€‚</li>
</ul><p>æ”¯æŒäº†è¿™äº›æµç¨‹æ§åˆ¶è¯­å¥ä»¥åï¼Œæˆ‘ä»¬çš„è„šæœ¬è¯­è¨€å°±æ›´ä¸°å¯Œäº†ï¼</p><h2>è¯¾ç¨‹å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ ç”¨Antlré«˜æ•ˆåœ°å®Œæˆäº†å¾ˆå¤šè¯­æ³•åˆ†æå·¥ä½œï¼Œæ¯”å¦‚å®Œå–„è¡¨è¾¾å¼ä½“ç³»ï¼Œå®Œå–„è¯­å¥ä½“ç³»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å‡çº§äº†è„šæœ¬è§£é‡Šå™¨ï¼Œä½¿å®ƒèƒ½å¤Ÿæ‰§è¡Œæ›´å¤šçš„è¡¨è¾¾å¼å’Œè¯­å¥ã€‚</p><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œé’ˆå¯¹é¢ä¸´çš„å…·ä½“é—®é¢˜ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åƒä»Šå¤©è¿™æ ·è¿…é€Ÿåœ°å»ºç«‹å¯ä»¥è¿è¡Œçš„ä»£ç ï¼Œä¸“æ³¨äºè§£å†³é¢†åŸŸé—®é¢˜ï¼Œå¿«é€Ÿå‘æŒ¥ç¼–è¯‘æŠ€æœ¯çš„å¨åŠ›ã€‚</p><p>è€Œä¸”åœ¨ä½¿ç”¨å·¥å…·æ—¶ï¼Œé’ˆå¯¹å·¥å…·çš„æŸä¸ªç‰¹æ€§ï¼Œæ¯”å¦‚å¯¹ä¼˜å…ˆçº§å’Œç»“åˆæ€§çš„æ”¯æŒï¼Œæˆ‘ä»¬å¤§è‡´èƒ½å¤ŸçŒœåˆ°å·¥å…·å†…éƒ¨çš„å®ç°æœºåˆ¶ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»äº†è§£äº†ç›¸å…³åŸç†ã€‚</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>æˆ‘ä»¬é€šè¿‡Antlrå¹¶å€Ÿé‰´æˆç†Ÿçš„è§„åˆ™æ–‡ä»¶ï¼Œå¾ˆå¿«å°±é‡æ„äº†è„šæœ¬è§£é‡Šå™¨ï¼Œè¿™æ ·å·¥ä½œæ•ˆç‡å¾ˆé«˜ã€‚é‚£ä¹ˆï¼Œé’ˆå¯¹è¦è§£å†³çš„é¢†åŸŸé—®é¢˜ï¼Œä½ æ˜¯ä¸æ˜¯å€Ÿé‰´è¿‡ä¸€äº›æˆç†Ÿå®è·µæˆ–è€…æœ€ä½³å®è·µæ¥æå‡æ•ˆç‡å’Œè´¨é‡ï¼Ÿåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åˆæœ‰ä»€ä¹ˆå¿ƒå¾—å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„å¿ƒå¾—ã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p>æˆ‘æŠŠä¸€é—¨åŠŸèƒ½æ¯”è¾ƒå…¨çš„è„šæœ¬è¯­è¨€çš„ç¤ºä¾‹æ”¾åœ¨äº†playscript-javaé¡¹ç›®ä¸‹ï¼Œä»¥åå‡ è®²çš„å†…å®¹éƒ½ä¼šå‚è€ƒè¿™é‡Œé¢çš„ç¤ºä¾‹ä»£ç ã€‚</p><ul>
<li>playscript-javaï¼ˆé¡¹ç›®ç›®å½•ï¼‰ï¼š <a href="https://gitee.com/richard-gong/PlayWithCompiler/tree/master/playscript-java">ç äº‘</a>   <a href="https://github.com/RichardGong/PlayWithCompiler/tree/master/playscript-java">GitHub</a></li>
<li>PlayScript.javaï¼ˆå…¥å£ç¨‹åºï¼‰ï¼š   <a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/playscript-java/src/main/play/PlayScript.java">ç äº‘</a>   <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/playscript-java/src/main/play/PlayScript.java">GitHub</a></li>
<li>PlayScript.g4ï¼ˆè¯­æ³•è§„åˆ™ï¼‰ï¼š     <a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/playscript-java/src/main/play/PlayScript.g4">ç äº‘</a> <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/playscript-java/src/main/play/PlayScript.g4">GitHub</a></li>
<li>ASTEvaluator.javaï¼ˆè§£é‡Šå™¨ï¼‰ï¼š <a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/playscript-java/src/main/play/ASTEvaluator.java">ç äº‘</a>   <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/playscript-java/src/main/play/ASTEvaluator.java">GitHub</a></li>
</ul><p><img src="https://static001.geekbang.org/resource/image/00/66/008ff7b6092be5463a414a0e0771dc66.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Void_seT  2019-08-28 11:23:41
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œç›®å‰çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚è¡¨è¾¾å¼è¯­æ³•è§„åˆ™ã€è¯­å¥è¯­æ³•è§„åˆ™ç­‰ï¼Œè™½ç„¶èƒ½çŸ¥é“å®ƒä»¬è¡¨ç¤ºäº†ä»€ä¹ˆï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“å®ƒæ˜¯æ€ä¹ˆå‡­ç©ºäº§ç”Ÿçš„ï¼›è¯·é—®ï¼šè¿™ç§è§„åˆ™æ˜¯ç›¸å¯¹æ¯”è¾ƒå›ºå®šçš„ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨æ—¶ï¼Œå¯ä»¥å‚ç…§â€œæ ‡å‡†â€çš„è§„åˆ™æ–‡æ³•è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿè¿˜æ˜¯è¦è‡ªå·±æŒæ¡å„ç§ç±»å‹è¯­æ³•è§„åˆ™çš„å„ä¸ªç»„æˆç»†èŠ‚ï¼Œä»¥ä¾¿äºåœ¨å†™è¯­æ³•è§„åˆ™æ—¶å¯ä»¥ä¿¡æ‰‹æ‹ˆæ¥å‘¢ï¼Ÿå¦‚æœéœ€è¦ç†Ÿç»ƒæŒæ¡è¯­æ³•è§„åˆ™çš„å„ä¸ªç»„æˆç»†èŠ‚ï¼Œç›®å‰çš„å·¥ä½œå¦‚æœè¿˜ç”¨ä¸åˆ°ç”Ÿæˆâ€œå°ç¼–è¯‘å™¨â€è¿™ç§æŠ€èƒ½ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç»ƒä¹ æˆ–é«˜å¼ºåº¦çš„è®­ç»ƒæ—¶é—´çš„è¯ï¼Œæ˜¯å¦éœ€è¦ç°åœ¨å°±ç¡¬å•ƒä¸‹è¿™å—ç¡¬éª¨å¤´ï¼ˆå› ä¸ºæ€•é•¿æ—¶é—´ä¸ä½¿ç”¨ï¼Œå°†æ¥çœŸæ­£è¦ä½¿ç”¨æ—¶ï¼Œè¿˜æ˜¯è¦é‡æ–°å†è®­ç»ƒä¸€éï¼‰ï¼Ÿ [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 11:31:17</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å„ç§æ–‡æ³•è§„åˆ™çš„è®¾è®¡ç»éªŒçš„ç§¯ç´¯ï¼Œå±äº&quot;æœ€ä½³å®è·µ&quot;çš„èŒƒç•´ã€‚æˆ‘å»ºè®®å¤§å®¶ä¸ä»…ä»…æ˜¯è¦æ‡‚åŸç†ï¼Œè¿˜èƒ½æŒæ¡ä¸€äº›æœ€ä½³å®è·µï¼Œè¯´èµ·æŸä¸ªè¯­æ³•ç°è±¡çš„æ—¶å€™ï¼Œéšåå°±èƒ½å†™å‡ºå‡ ä¸ªæ–‡æ³•æ¥ã€‚<br>èƒ½æœ‰è¿™ç§å®æ“èƒ½åŠ›ï¼Œæ‰ç®—æ˜¯æŠŠç†è®ºè½åˆ°å®é™…äº†ã€‚è¿™äº›â€œæœ€ä½³å®è·µâ€ï¼Œå±äºä½ è‡ªå·±ç§¯ç´¯çš„é¢†åŸŸç»éªŒï¼Œè¿™ä¹Ÿæ˜¯ä½ ä¸ºä»€ä¹ˆä¼šæ›´æœ‰ç«äº‰åŠ›çš„åŸå› ã€‚<br>è¿™äº›ç»éªŒï¼Œåªæœ‰åŠ¨æ‰‹ï¼Œå¤šçœ‹åˆ«äººçš„ï¼Œæ‰èƒ½ç§¯ç´¯ã€‚ä¸€èˆ¬æ²¡æœ‰ä¹¦ç±ä¸“é—¨è®²è¿™ä¸ªï¼Œé¡¶å¤šæ˜¯ä»¥ç¤ºä¾‹çš„æ–¹å¼å‘ˆç°ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Spring  2019-08-28 09:50:59
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œä½ å¥½ã€‚è¯·æ•™ä¸€ä¸‹ï¼Œè¯æ³•ï¼Œè¯­æ³•è§£æåç”Ÿæˆ AST åï¼Œè®¡ç®—æœºæ€ä¹ˆæŒ‡å¯¼æˆ‘çš„AST ä¸­çš„â€œ+â€ å°±æ˜¯æ‰§è¡Œ add  çš„è®¡ç®—å‘¢ï¼Ÿè¿™å…¶ä¸­æ˜¯ä¸æ˜¯è¿˜æœ‰è¿˜å­˜åœ¨ä¸€ä¸ªä¸­é—´å±‚ï¼Ÿ [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 10:47:57</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¯¹ã€‚ä½ æçš„é—®é¢˜å¾ˆå¥½ã€‚<br>è¯´æ˜ä½ æ€è€ƒçš„å¾ˆæ·±å…¥äº†ã€‚<br>â€œ+â€æ‰§è¡ŒåŠ æ³•è¿ç®—ï¼Œæ˜¯ç”±è®¡ç®—æœºè¯­è¨€çš„è¯­ä¹‰è§„å®šçš„ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥å†è®©â€œ+â€å»åšå­—ç¬¦ä¸²è¿æ¥ï¼Œè¿™ä¹Ÿæ˜¯è¯­ä¹‰ä¸Šçš„è§„å®šã€‚<br>æ‰€ä»¥ï¼Œè®¡ç®—æœºè¯­è¨€ä¹‹é—´çœŸæ­£çš„å·®åˆ«ï¼Œå…¶å®åœ¨è¯­ä¹‰ä¸Šã€‚<br>è¯æ³•åˆ†æã€è¯­æ³•åˆ†æå®Œæ¯•ä»¥åï¼Œåªæ˜¯æ­èµ·ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚è‡³äºåŸºäºè¿™ä¸ªç»“æ„å¯ä»¥å¹²ä»€ä¹ˆï¼Œè¿˜å¿…é¡»é™„åŠ è¯­ä¹‰ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªASTä¸Šé™„åŠ ä¸€äº›â€œåŠ¨ä½œæŒ‡ä»¤â€ï¼Œæ¯”å¦‚å¯¹ASTéå†çš„æ—¶å€™ï¼Œéå†åˆ°â€œ+â€ï¼Œå°±æŠŠä¸¤è¾¹åŠ èµ·æ¥ã€‚è¿™å°±æ˜¯å±æ€§è®¡ç®—åšçš„äº‹æƒ…ã€‚æˆ‘ä»¬æŠŠvalueä½œä¸ºä¸€ä¸ªå±æ€§ï¼Œç”¨ä¸€äº›è§„åˆ™æ¥è®¡ç®—å±æ€§ã€‚è¯´èµ·æ¥ï¼Œå±æ€§è®¡ç®—è¿˜æ˜¯å¤§å¸ˆé«˜å¾·çº³æå‡ºæ¥çš„ã€‚<br>ä½ å†æ²¿ç€è‡ªå·±çš„æ€è·¯æ·±å…¥ä¸‹å»ï¼Œä½ å¯èƒ½è‡ªå·±æŠŠé«˜å¾·çº³å¤§å¸ˆæƒ³åˆ°çš„ä¹Ÿéƒ½æƒ³å‡ºæ¥äº†ã€‚<br>çœ‹æ¥ä½ å¯¹ç¼–è¯‘åŸç†çš„ç›´è§‰å¾ˆå¥½:-D</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ææ‡‚  2019-08-29 08:20:18
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            JavaScriptä¸­çš„thisæ˜¯å’‹å®ç°çš„ï¼Œè¿™ä¸ªä¸€ç›´å¤„äºè¿·ç³Šå½“ä¸­ï¼Œå¥½æƒ³å¼„æ¸…æ¥šï¼Œä¸åŒè¯­è¨€ä¹‹é—´è¯­æ„çš„å·®åˆ«ï¼Œå­¦å®Œè¯­æ„èƒ½ç†è§£ä¹ˆğŸ˜‡ ğŸ˜‡ ğŸ˜‡ ï¼Œçœ‹äº†å¾ˆå¤šè¯¾ç¨‹ï¼Œéƒ½å¾ˆå¤±æœ›ï¼Œéƒ½æ˜¯å†è®²å‡ ç§åœºæ™¯ï¼Œæ€ä¹ˆæŒ‡å‘ï¼Œæ²¡å®è´¨çš„æ”¹å˜ï¼ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ææ‡‚  2019-08-29 07:46:34
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç°åœ¨éƒ½æ˜¯ç”¨ä¸€é—¨è¯­è¨€å»å®ç°è¿™äº›åŠŸèƒ½ï¼Œæˆ‘æƒ³çŸ¥é“æœ€å¼€å§‹çš„è¯­è¨€æ˜¯æ€ä¹ˆå®ç°åˆ†æçš„å‘¢ï¼æœ‰ä¸€ç‚¹é¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡ï¼ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä¸­å¹´ç”·å­  2019-08-28 23:50:14
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç¼–è¯‘ git é‡Œ PlayScript-cppï¼Œ æˆ‘è¿™é‡ŒæŠ¥é”™ï¼Œ PlayScriptJit.h è¿™ä¸ªæ–‡ä»¶ï¼Œ æäº†åŠå¤©æ²¡ææ‡‚<br>In file included from &#47;Users&#47;shiny&#47;learn&#47;PlayWithCompiler&#47;playscript-cpp&#47;src&#47;PlayScript.cpp:5:<br>[build] In file included from &#47;Users&#47;shiny&#47;learn&#47;PlayWithCompiler&#47;playscript-cpp&#47;src&#47;grammar&#47;IRGen.h:28:<br>[build] &#47;Users&#47;shiny&#47;learn&#47;PlayWithCompiler&#47;playscript-cpp&#47;src&#47;grammar&#47;PlayScriptJIT.h:33:31: error: unknown type name &#39;LegacyRTDyldObjectLinkingLayer&#39;; did you mean &#39;RTDyldObjectLinkingLayer&#39;?<br>[build]             using ObjLayerT = LegacyRTDyldObjectLinkingLayer;<br>[build]                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>[build]                               RTDyldObjectLinkingLayer 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è®¸ç«¥ç«¥  2019-08-28 16:49:41
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            éš¾åº¦è¶Šæ¥è¶Šå¤§äº†ï¼Œè¦å¥½å¥½æ¶ˆåŒ–æ‰è¡Œã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            çŸ³ç»´åº·  2019-08-28 09:29:10
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            statement<br>    : blockLabel=block<br>    | IF parExpression statement (ELSE statement)?<br>    | FOR &#39;(&#39; forControl &#39;)&#39; statement<br>    | WHILE parExpression statement<br>    | DO statement WHILE parExpression &#39;;&#39;<br>    | SWITCH parExpression &#39;{&#39; switchBlockStatementGroup* switchLabel* &#39;}&#39;<br>    | RETURN expression? &#39;;&#39;<br>    | BREAK IDENTIFIER? &#39;;&#39;<br>    | SEMI<br>    | statementExpression=expression &#39;;&#39;<br>    ;<br>è¯·é—®&quot; : blockLabel=block&quot;è¿™ä¸ªè§„åˆ™å¦‚ä½•è§£é‡Š?è°¢è°¢! 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 10:02:12</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">è¿™æ˜¯ç»™blockèµ·äº†ä¸ªåˆ«åï¼Œè¿™æ ·åœ¨ç”Ÿæˆçš„ASTèŠ‚ç‚¹StatementContextä¸­ï¼Œå°±ä¼šæœ‰blockLabelè¿™ä¸ªå±æ€§ï¼Œæ¥è®¿é—®è¿™ä¸ªä¸‹çº§èŠ‚ç‚¹ã€‚<br>å°±æ˜¯ä¸ºäº†ç¼–ç¨‹æ–¹ä¾¿çš„ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é›²è‡³  2019-08-28 08:08:47
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆèƒ½è®²ä¸€ä¸‹antlrçš„è¯­æ³•å—ï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 10:04:45</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">antlræ˜¯ä¸ªå·¥å…·ã€‚å®ƒçš„å®Œæ•´è¯­æ³•å’Œä»‹ç»ä»€ä¹ˆçš„ï¼Œçœ‹å®˜æ–¹ç½‘ç«™å’Œæˆ‘æä¾›çš„å‚è€ƒä¹¦å°±è¡Œäº†ã€‚æˆ‘ä»¬è¯¾ç¨‹ä¸å¯èƒ½åœ¨è¿™æ–¹é¢ç¬”å¢¨å¤ªå¤šã€‚<br>å·¥å…·è¿™ä¸ªäº‹æƒ…ï¼Œä½ åªè¦äº†è§£äº†åŸç†ï¼Œå»è¯•ç€ç”¨ä¸€ä¸‹å°±è¡Œäº†ã€‚<br>åŠ¨æ‰‹æ˜¯æœ€é‡è¦çš„ã€‚è¯¾ç¨‹é‡Œçš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥ç»™ä½ æ€ä¹ˆå…·ä½“ä½¿ç”¨antlræä¾›å¾ˆå¤šçº¿ç´¢ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            (ï¿£_ï¿£ )  2019-08-28 01:24:33
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å†™äº†ä¸€æ™šä¸Šç»ˆäºç”¨cè¯­è¨€æ¨¡ä»¿ç€å®ç°äº†ç¬¬äºŒèŠ‚è¯¾çš„å†…å®¹<br>https:&#47;&#47;github.com&#47;hongningexpro&#47;Play_with_Compiler&#47;tree&#47;master&#47;01-Simple_Lexer 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 10:05:14</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ç‚¹èµï¼<br>åŠ¨æ‰‹å‡ºçœŸçŸ¥ï¼</div>
</div>
            
    </div>
</li>
            </ul>
</div>
</body>
</html>