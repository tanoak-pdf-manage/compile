<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>18-ç§»è¿›å’Œè§„çº¦ï¼šç”¨LRç®—æ³•æ¨æ¼”ä¸€ä¸ªå®ä¾‹</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>18-ç§»è¿›å’Œè§„çº¦ï¼šç”¨LRç®—æ³•æ¨æ¼”ä¸€ä¸ªå®ä¾‹</h1>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€è®¨è®ºçš„è¯­æ³•åˆ†æç®—æ³•ï¼Œéƒ½æ˜¯è‡ªé¡¶å‘ä¸‹çš„ã€‚ä¸ä¹‹ç›¸å¯¹åº”çš„ï¼Œæ˜¯è‡ªåº•å‘ä¸Šçš„ç®—æ³•ï¼Œæ¯”å¦‚æœ¬èŠ‚è¯¾è¦æ¢è®¨çš„LRç®—æ³•å®¶æ—ã€‚</p><p>LRç®—æ³•æ˜¯ä¸€ç§è‡ªåº•å‘ä¸Šçš„ç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„è¯­æ³•ï¼Œè€Œä¸”æ²¡æœ‰å·¦é€’å½’çš„é—®é¢˜ã€‚ç¬¬ä¸€ä¸ªå­—æ¯Lï¼Œä¸LLç®—æ³•çš„ç¬¬ä¸€ä¸ªLä¸€æ ·ï¼Œä»£è¡¨ä»å·¦å‘å³è¯»å…¥ç¨‹åºã€‚ç¬¬äºŒä¸ªå­—æ¯Rï¼ŒæŒ‡çš„æ˜¯RightMostï¼ˆæœ€å³æ¨å¯¼ï¼‰ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½¿ç”¨äº§ç”Ÿå¼çš„æ—¶å€™ï¼Œæ˜¯ä»å³å¾€å·¦ä¾æ¬¡å±•å¼€éç»ˆç»“ç¬¦ã€‚ä¾‹å¦‚ï¼Œå¯¹äºâ€œadd-&gt;add+mulâ€è¿™æ ·ä¸€ä¸ªäº§ç”Ÿå¼ï¼Œæ˜¯ä¼˜å…ˆæŠŠmulå±•å¼€ï¼Œç„¶åå†æ˜¯addã€‚åœ¨æ¥ä¸‹æ¥çš„è®²è§£è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p>è‡ªé¡¶å‘ä¸‹çš„ç®—æ³•ï¼Œæ˜¯é€’å½’åœ°åšæ¨¡å¼åŒ¹é…ï¼Œä»è€Œé€æ­¥åœ°æ„é€ å‡ºASTã€‚é‚£ä¹ˆè‡ªåº•å‘ä¸Šçš„ç®—æ³•æ˜¯å¦‚ä½•æ„é€ å‡ºASTçš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ç”¨ç§»è¿›-è§„çº¦çš„ç®—æ³•ã€‚</p><p>æœ¬èŠ‚è¯¾ï¼Œæˆ‘å°±å¸¦ä½ é€šè¿‡ç§»è¿›-è§„çº¦æ–¹æ³•ï¼Œè‡ªåº•å‘ä¸Šåœ°æ„é€ ASTï¼Œå®Œæˆè¯­æ³•çš„è§£æã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªä¾‹å­çœ‹çœ‹è‡ªåº•å‘ä¸Šè¯­æ³•åˆ†æçš„è¿‡ç¨‹ã€‚</p><h2>é€šè¿‡å®ä¾‹äº†è§£è‡ªåº•å‘ä¸Šè¯­æ³•åˆ†æçš„è¿‡ç¨‹</h2><p>æˆ‘ä»¬é€‰æ‹©ç†Ÿæ‚‰çš„è¯­æ³•è§„åˆ™ï¼š</p><pre><code>add -&gt; mul
add -&gt; add + mul
mul -&gt; pri
mul -&gt; mul * pri  
pri -&gt; Int | (add)
</code></pre><p>ç„¶åæ¥è§£æâ€œ2+3*5â€è¿™ä¸ªè¡¨è¾¾å¼ï¼ŒASTå¦‚ä¸‹ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/1b/70/1ba6be3467aab986c181203f82dbb670.jpg" alt=""></p><p>æˆ‘ä»¬åˆ†æ­¥éª¤çœ‹ä¸€ä¸‹è§£æçš„å…·ä½“è¿‡ç¨‹ã€‚</p><p>ç¬¬1æ­¥ï¼Œçœ‹åˆ°ç¬¬ä¸€ä¸ªTokenï¼Œæ˜¯Intï¼Œ2ã€‚æˆ‘ä»¬æŠŠå®ƒä½œä¸ºASTçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒåŒæ—¶æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªæ ˆé‡Œï¼ˆå°±æ˜¯å›¾ä¸­çº¢çº¿å·¦è¾¹çš„éƒ¨åˆ†ï¼‰ã€‚è¿™ä¸ªæ ˆä»£è¡¨ç€æ­£åœ¨å¤„ç†çš„ä¸€äº›ASTèŠ‚ç‚¹ï¼ŒæŠŠTokenç§»åˆ°æ ˆé‡Œçš„åŠ¨ä½œå«åš<strong>ç§»è¿›ï¼ˆShiftï¼‰ã€‚</strong></p><!-- [[[read_end]]] --><p><img src="https://static001.geekbang.org/resource/image/00/2c/00a3c4a21899375d98869b6a8af5672c.jpg" alt=""></p><p>ç¬¬2æ­¥ï¼Œæ ¹æ®è¯­æ³•è§„åˆ™ï¼ŒIntæ˜¯ä»priæ¨å¯¼å‡ºæ¥çš„ï¼ˆpri-&gt;Intï¼‰ï¼Œé‚£ä¹ˆå®ƒçš„ä¸Šçº§ASTè‚¯å®šæ˜¯priï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç»™å®ƒåŠ äº†ä¸€ä¸ªçˆ¶èŠ‚ç‚¹priï¼ŒåŒæ—¶ï¼Œä¹ŸæŠŠæ ˆé‡Œçš„Intæ›¿æ¢æˆäº†priã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯è¯­æ³•æ¨å¯¼çš„é€†è¿‡ç¨‹ï¼Œå«åš<strong>è§„çº¦ï¼ˆReduceï¼‰ã€‚</strong></p><p>Reduceè¿™ä¸ªè¯ä½ åœ¨å­¦Map-Reduceæ—¶å¯èƒ½æ¥è§¦è¿‡ï¼Œå®ƒç›¸å½“äºæˆ‘ä»¬å£è¯­åŒ–çš„â€œå€’æ¨â€ã€‚å…·ä½“æ¥è®²ï¼Œå®ƒæ˜¯ä»å·¥ä½œåŒºé‡Œå€’ç€å–å‡º1åˆ°nä¸ªå…ƒç´ ï¼Œæ ¹æ®æŸä¸ªäº§ç”Ÿå¼ï¼Œç»„åˆå‡ºä¸Šä¸€çº§çš„éç»ˆç»“ç¬¦ï¼Œä¹Ÿå°±æ˜¯ASTçš„ä¸Šçº§èŠ‚ç‚¹ï¼Œç„¶åå†æ”¾è¿›å·¥ä½œåŒºï¼ˆä¹Ÿå°±æ˜¯ç«–çº¿çš„å·¦è¾¹ï¼‰ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæ ˆé‡Œå¯èƒ½æœ‰éç»ˆç»“ç¬¦ï¼Œä¹Ÿå¯èƒ½æœ‰ç»ˆç»“ç¬¦ï¼Œå®ƒä»¿ä½›æ˜¯æˆ‘ä»¬ç»„è£…ASTçš„ä¸€ä¸ªå·¥ä½œåŒºã€‚ç«–çº¿çš„å³è¾¹å…¨éƒ½æ˜¯Tokenï¼ˆä¹Ÿå°±æ˜¯ç»ˆç»“ç¬¦ï¼‰ï¼Œå®ƒä»¬åœ¨ç­‰å¾…å¤„ç†ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/64/c8/6499b8cfec0a4b6fdc5e18a47a9cc6c8.jpg" alt=""></p><p>ç¬¬3æ­¥ï¼Œä¸ç¬¬2æ­¥ä¸€æ ·ï¼Œå› ä¸ºpriåªèƒ½æ˜¯mulæ¨å¯¼å‡ºæ¥çš„ï¼Œäº§ç”Ÿå¼æ˜¯â€œmul-&gt;priâ€ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆåšäº†ä¸€æ¬¡è§„çº¦ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/48/c5/48db9c66da05591080355ce918af14c5.jpg" alt=""></p><p>ç¬¬4æ­¥ï¼Œæˆ‘ä»¬æ ¹æ®â€œadd-&gt;mulâ€äº§ç”Ÿå¼ï¼Œå°†mulè§„çº¦æˆaddã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å¯¹ç¬¬ä¸€ä¸ªTokenåšäº†3æ¬¡è§„çº¦ï¼Œå·²ç»åˆ°å¤´äº†ã€‚è¿™é‡Œä¸ºä»€ä¹ˆåšè§„çº¦ï¼Œè€Œä¸æ˜¯åœåœ¨mulä¸Šï¼Œç§»è¿›+å·ï¼Œæ˜¯æœ‰åŸå› çš„ã€‚å› ä¸ºæ²¡æœ‰ä¸€ä¸ªäº§ç”Ÿå¼ï¼Œæ˜¯mulåé¢è·Ÿ+å·ï¼Œè€Œaddåé¢å´å¯ä»¥è·Ÿ+å·ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/fa/05/fa907d7b0b0101253f59b5168c2e6e05.jpg" alt=""></p><p>ç¬¬5æ­¥ï¼Œç§»è¿›+å·ã€‚ç°åœ¨æ ˆé‡Œæœ‰ä¸¤ä¸ªå…ƒç´ äº†ï¼Œåˆ†åˆ«æ˜¯addå’Œ+ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/91/e5/915a18c729b913a740b736c8f35f47e5.jpg" alt=""></p><p>ç¬¬6æ­¥ï¼Œç§»è¿›Intï¼Œä¹Ÿå°±æ˜¯æ•°å­—3ã€‚æ ˆé‡Œç°åœ¨æœ‰3ä¸ªå…ƒç´ ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/68/b5/68ce20f1aa631cf16c14abe5923594b5.jpg" alt=""></p><p>ç¬¬7åˆ°ç¬¬8æ­¥ï¼ŒIntè§„çº¦åˆ°priï¼Œå†è§„çº¦åˆ°mulã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åšè§„çº¦çš„æ–¹å¼éƒ½æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å¯¹ç€æ ˆé¡¶çš„å…ƒç´ ï¼ŒæŠŠå®ƒåå‘æ¨å¯¼å›å»ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/46/67/4699dbc9c29ca3a0914d3dc2fab19767.jpg" alt=""></p><p>ç¬¬9æ­¥ï¼Œæˆ‘ä»¬é¢ä¸´3ä¸ªé€‰æ‹©ï¼Œæ¯”è¾ƒéš¾ã€‚</p><p>ç¬¬ä¸€ä¸ªé€‰æ‹©æ˜¯ç»§ç»­æŠŠmulè§„çº¦æˆaddï¼Œç¬¬äºŒä¸ªé€‰æ‹©æ˜¯æŠŠâ€œadd+mulâ€è§„çº¦æˆaddã€‚è¿™ä¸¤ä¸ªé€‰æ‹©éƒ½æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºå®ƒä»¬æœ€ç»ˆæ— æ³•å½¢æˆæ­£ç¡®çš„ASTã€‚</p><p><img src="https://static001.geekbang.org/resource/image/06/dd/068a542af8005f7ab6d0a30c6ad711dd.jpg" alt=""></p><p>ç¬¬ä¸‰ä¸ªé€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§â€œmul-&gt;mul*priâ€ï¼Œç»§ç»­ç§»è¿› *å· ï¼Œè€Œä¸æ˜¯åšè§„çº¦ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½å½¢æˆæ­£ç¡®çš„ASTï¼Œå°±åƒå›¾ä¸­çš„è™šçº¿ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/81/3b/819a522455602cf54818fc7a9c81b33b.jpg" alt=""></p><p>ç¬¬10æ­¥ï¼Œç§»è¿›Intï¼Œä¹Ÿå°±æ˜¯æ•°å­—5ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/d1/20/d1c83146b3bda9f13b14148eee0e5520.jpg" alt=""></p><p>ç¬¬11æ­¥ï¼ŒIntè§„çº¦æˆpriã€‚</p><p><img src="https://static001.geekbang.org/resource/image/81/77/818bd7df8fea9c91a4f67629822f3177.jpg" alt=""></p><p>ç¬¬12æ­¥ï¼Œmul*priè§„çº¦æˆmulã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œæ¯”å¦‚æŠŠpriç»§ç»­è§„çº¦æˆmulã€‚ä½†å®ƒæ˜¾ç„¶ä¹Ÿæ˜¯é”™è¯¯çš„é€‰æ‹©ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/16/92/16dddb819a554e55e092388f0c649c92.jpg" alt=""></p><p>ç¬¬13æ­¥ï¼Œadd+mulè§„çº¦æˆaddã€‚</p><p><img src="https://static001.geekbang.org/resource/image/9a/54/9a64d2d45f860d727d69ce980b071a54.jpg" alt=""></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æ„å»ºå®Œæˆäº†ä¸€æ£µæ­£ç¡®çš„ASTï¼Œå¹¶ä¸”ï¼Œæ ˆé‡Œä¹Ÿåªå‰©ä¸‹äº†ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯æ ¹èŠ‚ç‚¹ã€‚</p><p>æ•´ä¸ªè¯­æ³•è§£æè¿‡ç¨‹ï¼Œå®è´¨æ˜¯<strong>åå‘æœ€å³æ¨å¯¼ï¼ˆReverse RightMost Derivationï¼‰ã€‚</strong>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¦‚æœæŠŠASTèŠ‚ç‚¹æ ¹æ®åˆ›å»ºé¡ºåºç¼–å·ï¼Œå°±æ˜¯ä¸‹é¢è¿™å¼ å›¾å‘ˆç°çš„æ ·å­ï¼Œæ ¹èŠ‚ç‚¹ç¼–å·æœ€å¤§æ˜¯13ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/f2/59/f2f85727e7c4787d00f0c60d08c0d159.jpg" alt=""></p><p>ä½†è¿™æ˜¯è§„çº¦çš„è¿‡ç¨‹ï¼Œå¦‚æœæ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„æ¨å¯¼è¿‡ç¨‹ï¼Œé¡ºåºæ°å¥½æ˜¯åè¿‡æ¥çš„ï¼Œå…ˆæ˜¯13å·ï¼Œå†æ˜¯å³å­èŠ‚ç‚¹12å·ï¼Œå†æ˜¯12å·çš„å³å­èŠ‚ç‚¹11å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªæœ€å³æ¨å¯¼è¿‡ç¨‹å†™åœ¨ä¸‹é¢ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/c4/3d/c46ca0a9766ee1ee87869fc2e92e313d.jpg" alt=""></p><p>åœ¨è¯­æ³•è§£æçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä»åº•ä¸‹åæ¨å›å»ï¼Œæ‰€ä»¥å«åšåå‘çš„æœ€å³æ¨å¯¼è¿‡ç¨‹ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼ŒLRç®—æ³•ä¸­çš„Rï¼Œå¸¦æœ‰åå‘ï¼ˆReverseï¼‰å’Œæœ€å³ï¼ˆReightmostï¼‰è¿™ä¸¤å±‚å«ä¹‰ã€‚</p><p>åœ¨æœ€å³æ¨å¯¼è¿‡ç¨‹ä¸­ï¼Œæˆ‘åŠ äº†ä¸‹åˆ’çº¿çš„éƒ¨åˆ†ï¼Œå«åšä¸€ä¸ª<strong>å¥æŸ„ï¼ˆHandleï¼‰</strong>ã€‚å¥æŸ„æ˜¯ä¸€ä¸ªäº§ç”Ÿå¼çš„å³è¾¹éƒ¨åˆ†ï¼Œä»¥åŠå®ƒåœ¨ä¸€ä¸ªå³å¥å‹ï¼ˆæœ€å³æ¨å¯¼å¯ä»¥å¾—åˆ°çš„å¥å‹ï¼‰ä¸­çš„ä½ç½®ã€‚ä»¥æœ€åº•ä¸‹ä¸€è¡Œä¸ºä¾‹ï¼Œè¿™ä¸ªå¥æŸ„â€œIntâ€æ˜¯äº§ç”Ÿå¼â€œpri-&gt;Intâ€çš„å³è¾¹éƒ¨åˆ†ï¼Œå®ƒçš„ä½ç½®æ˜¯å¥å‹â€œInt + Int * Intâ€çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå¥æŸ„ï¼Œå°±æ˜¯äº§ç”Ÿå¼æ˜¯åœ¨è¿™ä¸ªä½ç½®ä¸Šåšæ¨å¯¼çš„ï¼Œå¦‚æœéœ€è¦åšåå‘æ¨å¯¼çš„è¯ï¼Œä¹Ÿæ˜¯ä»è¿™ä¸ªä½ç½®å»åšè§„çº¦ã€‚</p><p>é’ˆå¯¹è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è‚‰çœ¼è¿›è¡Œåˆ¤æ–­ï¼Œæ‰¾åˆ°æ­£ç¡®çš„å¥æŸ„ï¼Œåšå‡ºæ­£ç¡®çš„é€‰æ‹©ã€‚ä¸è¿‡ï¼Œè¦æŠŠè¿™ç§åˆ¤æ–­è¿‡ç¨‹å˜æˆä¸¥å¯†çš„ç®—æ³•ï¼Œåšåˆ°åœ¨æ¯ä¸€æ­¥éƒ½é‡‡å–æ­£ç¡®çš„è¡ŒåŠ¨ï¼ŒçŸ¥é“è¯¥åšç§»è¿›è¿˜æ˜¯è§„çº¦ï¼Œåšè§„çº¦çš„è¯ï¼ŒæŒ‰ç…§å“ªä¸ªäº§ç”Ÿå¼ï¼Œè¿™å°±æ˜¯LRç®—æ³•è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜äº†ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚ä½•æ‰¾åˆ°æ­£ç¡®çš„å¥æŸ„å‘¢ï¼Ÿ</p><h2>æ‰¾åˆ°æ­£ç¡®çš„å¥æŸ„</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œæœ€å³æ¨å¯¼æ˜¯ä»æœ€å¼€å§‹çš„äº§ç”Ÿå¼å‡ºå‘ï¼Œç»è¿‡å¤šæ­¥æ¨å¯¼ï¼ˆå¤šæ­¥æ¨å¯¼è®°åš-&gt;*ï¼‰ï¼Œä¸€æ­¥æ­¥å½¢æˆå½“å‰çš„å±€é¢ ï¼ˆä¹Ÿå°±æ˜¯å·¦è¾¹æ ˆé‡Œæœ‰ä¸€äº›éç»ˆç»“ç¬¦å’Œç»ˆç»“ç¬¦ï¼Œå³è¾¹è¿˜å¯ä»¥é¢„çœ‹1åˆ°kä¸ªTokenï¼‰ã€‚</p><pre><code>add -&gt;* æ ˆ | Token
</code></pre><p>æˆ‘ä»¬è¦åƒä¾¦æ¢ä¸€æ ·ï¼Œæ ¹æ®æ‰‹å¤´æŒæ¡çš„ä¿¡æ¯ï¼Œåå‘æ¨å¯¼å‡ºè¿™ä¸ªå¤šæ­¥æ¨å¯¼çš„è·¯å¾„ï¼Œä»è€Œè·å¾—æ­£ç¡®çš„å¥æŸ„ã€‚æˆ‘ä»¬ä¾æ®çš„æ˜¯å·¦è¾¹æ ˆé‡Œçš„ä¿¡æ¯ï¼Œä»¥åŠå³è¾¹çš„Tokenä¸²ã€‚å¯¹äºLR(0)ç®—æ³•æ¥è¯´ï¼Œæˆ‘ä»¬åªä¾æ®å·¦è¾¹çš„æ ˆï¼Œå°±èƒ½æ‰¾åˆ°æ­£ç¡®çš„å¥æŸ„ï¼Œå¯¹äºLR(1)ç®—æ³•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä»å³è¾¹é¢„çœ‹ä¸€ä¸ªTokenã€‚</p><p>æˆ‘ä»¬çš„æ€è·¯æ˜¯æ ¹æ®è¯­æ³•è§„åˆ™ï¼Œå¤ç°è¿™æ¡æ¨å¯¼è·¯å¾„ã€‚ä»¥ç¬¬8æ­¥ä¸ºä¾‹ï¼Œä¸‹å›¾æ˜¯å®ƒçš„æ¨å¯¼è¿‡ç¨‹ï¼Œæ©™è‰²çš„è·¯å¾„æ˜¯å”¯ä¸€èƒ½å¤Ÿåˆ°è¾¾ç¬¬8æ­¥çš„è·¯å¾„ã€‚çŸ¥é“äº†æ­£å‘æ¨å¯¼çš„è·¯å¾„ï¼Œè‡ªç„¶çŸ¥é“æ¥ä¸‹æ¥è¯¥åšä»€ä¹ˆï¼Œåœ¨ç¬¬8æ­¥ï¼Œæˆ‘ä»¬æ­£ç¡®çš„é€‰æ‹©æ˜¯åšç§»è¿›ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/09/25/0958e017881e271edbc1362034425825.jpg" alt=""></p><p>ä¸ºäº†å±•ç¤ºè¿™ä¸ªæ¨å¯¼è¿‡ç¨‹ï¼Œæˆ‘å¼•å…¥äº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼š<strong>é¡¹ç›®ï¼ˆItemï¼‰ã€‚</strong></p><p>Itemä»£è¡¨å¸¦æœ‰â€œ.â€ç¬¦å·çš„äº§ç”Ÿå¼ã€‚æ¯”å¦‚â€œpri-&gt;(add)â€å¯ä»¥äº§ç”Ÿ4ä¸ªItemï¼Œâ€œ.â€åˆ†åˆ«åœ¨ä¸åŒçš„ä½ç½®ã€‚â€œ.â€å¯ä»¥çœ‹åšæ˜¯å‰é¢ç¤ºæ„å›¾ä¸­çš„ç«–çº¿ï¼Œå·¦è¾¹çš„çœ‹åšå·²ç»åœ¨æ ˆé‡Œçš„éƒ¨åˆ†ï¼Œâ€œ.â€å³è¾¹çš„çœ‹åšæ˜¯æœŸå¾…è·å¾—çš„éƒ¨åˆ†ï¼š</p><pre><code>pri-&gt;.(add)
pri-&gt;(.add)
pri-&gt;(add.)
pri-&gt;(add).
</code></pre><p>ä¸Šå›¾å…¶å®æ˜¯ä¸€ä¸ªNFAï¼Œåˆ©ç”¨è¿™ä¸ªNFAï¼Œæˆ‘ä»¬è¡¨è¾¾äº†æ‰€æœ‰å¯èƒ½çš„æ¨å¯¼æ­¥éª¤ã€‚æ¯ä¸ªItemï¼ˆæˆ–è€…çŠ¶æ€ï¼‰ï¼Œåœ¨æ¥æ”¶åˆ°ä¸€ä¸ªç¬¦å·çš„æ—¶å€™ï¼Œå°±è¿ç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œæ¯”å¦‚â€œadd-&gt;.add+mulâ€åœ¨æ¥æ”¶åˆ°ä¸€ä¸ªaddçš„æ—¶å€™ï¼Œå°±è¿ç§»åˆ°â€œadd-&gt;add.+mulâ€ï¼Œå†æ¥æ”¶åˆ°ä¸€ä¸ªâ€œ+â€ï¼Œå°±è¿ç§»åˆ°â€œadd-&gt;add+.mulâ€ã€‚</p><p>åœ¨è¿™ä¸ªçŠ¶æ€å›¾çš„å·¦ä¸Šè§’ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªè¾…åŠ©æ€§çš„äº§ç”Ÿå¼â€œstart-&gt;addâ€ï¼Œä½œä¸ºæ•´ä¸ªNFAçš„å”¯ä¸€å…¥å£ã€‚ä»è¿™ä¸ªå…¥å£å‡ºå‘ï¼Œå¯ä»¥ç”¨è¿™ä¸ªNFAæ¥åŒ¹é…æ ˆé‡Œå†…å®¹ï¼Œæ¯”å¦‚åœ¨ç¬¬8æ­¥çš„æ—¶å€™ï¼Œæ ˆä»¥åŠå³è¾¹ä¸‹ä¸€ä¸ªTokençš„çŠ¶æ€å¦‚ä¸‹ï¼Œå…¶ä¸­ç«–çº¿å·¦è¾¹æ˜¯æ ˆçš„å†…å®¹ï¼š</p><pre><code>add + mul | *
</code></pre><p>åœ¨NFAä¸­ï¼Œæˆ‘ä»¬ä»startå¼€å§‹éå†ï¼ŒåŸºäºæ ˆé‡Œçš„å†…å®¹ï¼Œèƒ½æ‰¾åˆ°å›¾ä¸­æ©™è‰²çš„å¤šæ­¥æ¨å¯¼è·¯å¾„ã€‚åœ¨è¿™ä¸ªçŠ¶æ€è¿ç§»è¿‡ç¨‹ä¸­ï¼Œå¯¼è‡´è½¬æ¢çš„ç¬¦å·åˆ†åˆ«æ˜¯â€œÎµã€addã€+ã€Îµã€mulâ€ï¼Œå¿½ç•¥å…¶ä¸­çš„Îµï¼Œå°±æ˜¯æ ˆé‡Œçš„å†…å®¹ã€‚</p><p>åœ¨NFAä¸­ï¼Œæˆ‘ä»¬æŸ¥æ‰¾åˆ°çš„Itemæ˜¯â€œmul-&gt;mul.*priâ€ã€‚è¿™ä¸ªæ—¶å€™â€œ.â€åœ¨Itemçš„ä¸­é—´ã€‚å› æ­¤ä¸‹ä¸€ä¸ªæ“ä½œåªèƒ½æ˜¯ä¸€ä¸ªShiftæ“ä½œï¼Œä¹Ÿå°±æ˜¯æŠŠä¸‹ä¸€ä¸ªTokenï¼Œ*å·ï¼Œç§»è¿›åˆ°æ ˆé‡Œã€‚</p><p>å¦‚æœâ€œ.â€åœ¨Itemçš„æœ€åï¼Œåˆ™å¯¹åº”ä¸€ä¸ªè§„çº¦æ“ä½œï¼Œæ¯”å¦‚åœ¨ç¬¬12æ­¥ï¼Œæ ˆé‡Œçš„å†…å®¹æ˜¯ï¼š</p><pre><code>add + mul | $    //$ä»£è¡¨Tokenä¸²çš„ç»“å°¾
</code></pre><p><img src="https://static001.geekbang.org/resource/image/4d/62/4dc5366506b8884d7af97b62fbaade62.jpg" alt=""></p><p>è¿™ä¸ªæ—¶å€™çš„Itemæ˜¯â€œadd-&gt;add+mul.â€ã€‚å¯¹äºæ‰€æœ‰ç‚¹ç¬¦å·åœ¨æœ€åé¢çš„Itemï¼Œæˆ‘ä»¬å·²ç»æ²¡æœ‰åŠæ³•ç»§ç»­å‘ä¸‹è¿ç§»äº†ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åšä¸€ä¸ªè§„çº¦æ“ä½œï¼Œä¹Ÿå°±æ˜¯åŸºäºâ€œadd + mulâ€è§„çº¦åˆ°addï¼Œä¹Ÿå°±æ˜¯åˆ°â€œadd-&gt;.add+mulâ€è¿™ä¸ªçŠ¶æ€ã€‚å¯¹äºä»»ä½•çš„Îµè½¬æ¢ï¼Œå…¶é€†å‘æ“ä½œä¹Ÿæ˜¯è§„çº¦ï¼Œæ¯”å¦‚å›¾ä¸­ä»â€œadd-&gt;.add+mulâ€è§„çº¦åˆ°â€œstart-&gt;.addâ€ã€‚</p><p>ä½†åšè§„çº¦æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦æ£€æŸ¥åé¢è·Ÿç€çš„Tokenï¼Œæ˜¯ä¸æ˜¯åœ¨Follow(add)ä¸­ã€‚å¯¹äºaddæ¥è¯´ï¼Œå®ƒçš„Followé›†åˆåŒ…æ‹¬{$ + ï¼‰}ã€‚å¦‚æœæ˜¯è¿™äº›Tokenï¼Œé‚£å°±åšè§„çº¦ã€‚å¦åˆ™ï¼Œå°±æŠ¥ç¼–è¯‘é”™è¯¯ã€‚</p><p>æ‰€ä»¥ï¼Œç°åœ¨æ¸…æ¥šäº†ï¼Œæˆ‘ä»¬èƒ½é€šè¿‡è¿™ä¸ªæœ‰é™è‡ªåŠ¨æœºï¼Œè·Ÿè¸ªè®¡ç®—å‡ºæ­£ç¡®çš„æ¨å¯¼è¿‡ç¨‹ã€‚</p><p>å½“ç„¶äº†ï¼Œåœ¨<a href="https://time.geekbang.org/column/article/137286">16è®²</a>é‡Œï¼Œæˆ‘æåˆ°æ¯ä¸ªNFAéƒ½å¯ä»¥è½¬æ¢æˆä¸€ä¸ªDFAã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ä¸Šé¢çš„NFAé‡Œå»åŒ¹é…ï¼Œä¹Ÿå¯ä»¥æŠŠNFAè½¬æˆDFAï¼Œé¿å…NFAçš„å›æº¯ç°è±¡ï¼Œè®©ç®—æ³•æ•ˆç‡æ›´é«˜ã€‚è½¬æ¢å®Œæ¯•çš„DFAå¦‚ä¸‹ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/a7/f4/a7cc157aca99e16e50b62011848d0af4.jpg" alt=""></p><p>åœ¨è¿™ä¸ªDFAä¸­ï¼Œæˆ‘åŒæ ·æ ‡æ³¨äº†åœ¨ç¬¬8æ­¥æ—¶çš„æ¨å¯¼è·¯å¾„ã€‚</p><p>ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£LRç®—æ³•çš„æœ¬è´¨ï¼Œæˆ‘ä»¬åŸºäºè¿™ä¸ªDFAå†æŠŠè¯­æ³•è§£æçš„è¿‡ç¨‹æ¨å¯¼ä¸€éã€‚</p><p>ç¬¬1æ­¥ï¼Œç§»è¿›ä¸€ä¸ªIntï¼Œä»çŠ¶æ€1è¿ç§»åˆ°9ã€‚Itemæ˜¯â€œpri-&gt;Int.â€ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8d/b3/8d3595409dc45886c36368621ad549b3.jpg" alt=""></p><p>ç¬¬2æ­¥ï¼Œä¾æ®â€œpri-&gt;Intâ€åšè§„çº¦ï¼Œä»çŠ¶æ€9å›åˆ°çŠ¶æ€1ã€‚å› ä¸ºç°åœ¨æ ˆé‡Œæœ‰ä¸ªpriå…ƒç´ ï¼Œæ‰€ä»¥åˆè¿ç§»è¿›äº†çŠ¶æ€8ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/69/ed/69c24bc62939a114dc6bc922d63011ed.jpg" alt=""></p><p>ç¬¬3æ­¥ï¼Œä¾æ®â€œmul-&gt;priâ€åšè§„çº¦ï¼Œä»çŠ¶æ€8å›åˆ°çŠ¶æ€1ï¼Œå†æ ¹æ®æ ˆé‡Œçš„mulå…ƒç´ è¿›å…¥çŠ¶æ€7ã€‚<strong>æ³¨æ„ï¼Œ</strong>åœ¨çŠ¶æ€7çš„æ—¶å€™ï¼Œä¸‹ä¸€æ­¥çš„èµ°å‘æœ‰ä¸¤ä¸ªå¯èƒ½çš„æ–¹å‘ï¼Œåˆ†åˆ«æ˜¯â€œadd-&gt;mul.â€å’Œâ€œmul-&gt;mul.*priâ€è¿™ä¸¤ä¸ªItemä»£è¡¨çš„æ–¹å‘ã€‚</p><p>åŸºäºâ€œadd-&gt;mul.â€ä¼šåšè§„çº¦ï¼Œè€ŒåŸºäºâ€œmul-&gt;mul.*priâ€ä¼šåšç§»è¿›ï¼Œè¿™å°±éœ€è¦çœ‹çœ‹åé¢çš„Tokenäº†ã€‚å¦‚æœåé¢çš„Tokenæ˜¯ *å·ï¼Œé‚£å…¶å®è¦é€‰ç¬¬äºŒä¸ªæ–¹å‘ã€‚ä½†ç°åœ¨åé¢æ˜¯+å·ï¼Œæ‰€ä»¥æ„å‘³ç€è¿™é‡Œåªèƒ½åšè§„çº¦ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/9e/cf/9ea1bbad681f1b23d83b6c8bb65feecf.jpg" alt=""></p><p>ç¬¬4æ­¥ï¼Œä¾æ®â€œadd-&gt;mulâ€åšè§„çº¦ï¼Œä»çŠ¶æ€7å›åˆ°çŠ¶æ€1ï¼Œå†ä¾æ®addå…ƒç´ è¿›å…¥çŠ¶æ€2ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a6/4e/a618509b0c0c96f8705b6016f9aeb04e.jpg" alt=""></p><p>ç¬¬5æ­¥ï¼Œç§»è¿›+å·ã€‚è¿™å¯¹åº”çŠ¶æ€å›¾ä¸Šçš„ä¸¤æ¬¡è¿ç§»ï¼Œé¦–å…ˆæ ¹æ®æ ˆé‡Œçš„ç¬¬ä¸€ä¸ªå…ƒç´ addï¼Œä»1è¿ç§»åˆ°2ã€‚ç„¶åå†æ ¹æ®â€œ+â€ï¼Œä»2åˆ°3ã€‚Itemçš„å˜åŒ–æ˜¯ï¼š</p><blockquote>
<p>çŠ¶æ€1ï¼šstart-&gt;.add<br>
çŠ¶æ€1ï¼šadd-&gt;.add+mul<br>
çŠ¶æ€2ï¼šadd-&gt;add.+mul<br>
çŠ¶æ€3ï¼šadd-&gt;add+.mul</p>
</blockquote><p>ä½ çœ‹ï¼Œé€šè¿‡ç§»è¿›è¿™ä¸ªåŠ å·ï¼Œæˆ‘ä»¬å®é™…ä¸ŠçŸ¥é“äº†è¿™ä¸ªè¡¨è¾¾å¼é¡¶éƒ¨å¿…ç„¶æœ‰ä¸€ä¸ªâ€œadd+mulâ€çš„ç»“æ„ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/52/22/5237305c41a308914748b62a60829d22.jpg" alt=""></p><p>ç¬¬6åˆ°ç¬¬8æ­¥ï¼Œç§»è¿›Intï¼Œå¹¶ä¸€ç›´è§„çº¦åˆ°mulã€‚çŠ¶æ€å˜åŒ–æ˜¯å…ˆä»çŠ¶æ€3åˆ°çŠ¶æ€9ï¼Œç„¶åå›åˆ°çŠ¶æ€3ï¼Œå†è¿›åˆ°çŠ¶æ€4ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/aa/e1/aa333e0cb2a6483f0850f37bb7c01fe1.jpg" alt=""></p><p><img src="https://static001.geekbang.org/resource/image/92/bd/923202cc491e8958f5d38ae1a76af7bd.jpg" alt=""></p><p>ç¬¬9æ­¥ï¼Œç§»è¿›ä¸€ä¸ª*ã€‚æ ¹æ®æ ˆé‡Œçš„å…ƒç´ ï¼Œè¿ç§»è·¯å¾„æ˜¯1-&gt;2-&gt;3-&gt;4-&gt;5ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/73/58/73d05c03c8d29f8c69b8e611696eec58.jpg" alt=""></p><p>ç¬¬10æ­¥ï¼Œç§»è¿›Intï¼Œè¿›å…¥çŠ¶æ€9ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/7f/87/7f0b98204bf0a19341acad593cb28987.jpg" alt=""></p><p>ç¬¬11æ­¥ï¼Œæ ¹æ®â€œpri-&gt;Intâ€è§„çº¦åˆ°priï¼Œå…ˆé€€å›åˆ°çŠ¶æ€5ï¼Œæ¥ç€æ ¹æ®priè¿›å…¥çŠ¶æ€6ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/f5/a9/f51998b10db36da51129a3a8332d7fa9.jpg" alt=""></p><p>ç¬¬12æ­¥ï¼Œæ ¹æ®â€œmul-&gt;mul*priâ€è§„çº¦åˆ°mulï¼Œä»è€Œé€€å›åˆ°çŠ¶æ€4ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/b8/ea/b8275d44114195013807b3c9b3148dea.jpg" alt=""></p><p>ç¬¬13æ­¥ï¼Œæ ¹æ®â€œadd-&gt;add+mulâ€è§„çº¦åˆ°addï¼Œä»è€Œé€€å›åˆ°çŠ¶æ€2ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8c/35/8c65fdb023f39abcfe0311e76f722635.jpg" alt=""></p><p>ä»çŠ¶æ€2å†æ ¹æ®â€œstart-&gt;addâ€å†è§„çº¦ä¸€æ­¥ï¼Œå°±å˜æˆäº†startï¼Œå›åˆ°çŠ¶æ€1ï¼Œè§£æå®Œæˆã€‚</p><p>ç°åœ¨æˆ‘ä»¬å·²ç»å¯¹æ•´ä¸ªç®—æ³•çš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹å»ºç«‹äº†ç›´è§‰è®¤çŸ¥ã€‚å¦‚æœæƒ³æ·±å…¥æŒæ¡LRç®—æ³•ï¼Œæˆ‘å»ºè®®ä½ æŠŠè¿™ç§æ¨å¯¼è¿‡ç¨‹å¤šåšå‡ éï¼Œè‡ªç„¶ä¼šäº†ç„¶äºèƒ¸ã€‚å»ºç«‹äº†ç›´è§‰è®¤çŸ¥ä»¥åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æŠŠLRç®—æ³•çš„ç±»å‹å’Œå®ç°ç»†èŠ‚è®¨è®ºä¸€ä¸‹ã€‚</p><h2>LRè§£æå™¨çš„ç±»å‹å’Œå®ç°</h2><p>LRç®—æ³•æ ¹æ®èƒ½åŠ›çš„å¼ºå¼±å’Œå®ç°çš„å¤æ‚ç¨‹åº¦ï¼Œå¯ä»¥åˆ†æˆå¤šä¸ªçº§åˆ«ï¼Œåˆ†åˆ«æ˜¯LR(0)ã€SLR(k)ï¼ˆå³ç®€å•LRï¼‰ã€LALR(k)ï¼ˆLook ahead LRï¼‰å’ŒLR(k)ï¼Œå…¶ä¸­kè¡¨ç¤ºè¦åœ¨Tokené˜Ÿåˆ—é‡Œé¢„è¯»kä¸ªTokenã€‚</p><p><img src="https://static001.geekbang.org/resource/image/76/69/76bb2ef4002f8e207c229978931b2669.jpg" alt=""></p><p>æˆ‘æ¥è®²è§£ä¸€ä¸‹è¿™å››ç§ç±»å‹ç®—æ³•çš„ç‰¹ç‚¹ï¼Œä¾¿äºä½ é€‰æ‹©å’Œä½¿ç”¨ã€‚</p><p><strong>LR(0)ä¸éœ€è¦é¢„çœ‹å³è¾¹çš„Tokenï¼Œä»…ä»…æ ¹æ®å·¦è¾¹çš„æ ˆå°±èƒ½å‡†ç¡®è¿›è¡Œåå‘æ¨å¯¼ã€‚</strong>æ¯”å¦‚ï¼Œå‰é¢DFAä¸­çš„çŠ¶æ€8åªæœ‰ä¸€ä¸ªItemï¼šâ€œmul-&gt;pri.â€ã€‚å¦‚æœå¤„åœ¨è¿™ä¸ªçŠ¶æ€ï¼Œé‚£æ¥ä¸‹æ¥æ“ä½œæ˜¯è§„çº¦ã€‚å‡è®¾å­˜åœ¨å¦ä¸€ä¸ªçŠ¶æ€ï¼Œå®ƒä¹Ÿåªæœ‰ä¸€ä¸ªItemï¼Œç‚¹ç¬¦å·ä¸åœ¨æœ«å°¾ï¼Œæ¯”å¦‚â€œmul-&gt;mul.*priâ€ï¼Œé‚£æ¥ä¸‹æ¥çš„æ“ä½œå°±æ˜¯ç§»è¿›ï¼ŒæŠŠä¸‹ä¸€ä¸ªè¾“å…¥æ”¾åˆ°æ ˆé‡Œã€‚</p><p>ä½†å®é™…ä½¿ç”¨çš„è¯­æ³•è§„åˆ™å¾ˆå°‘æœ‰è¿™ä¹ˆç®€å•çš„ã€‚æ‰€ä»¥LR(0)çš„è¡¨è¾¾èƒ½åŠ›å¤ªå¼±ï¼Œèƒ½å¤„ç†çš„è¯­æ³•è§„åˆ™æœ‰é™ï¼Œä¸å¤ªæœ‰å®ç”¨ä»·å€¼ã€‚å°±åƒåœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¾€ä¸‹é¢„è¯»ä¸€ä¸ªTokenï¼Œä»…ä»…åˆ©ç”¨å·¦è¾¹å·¥ä½œåŒºçš„ä¿¡æ¯ï¼Œæ˜¯æ‰¾ä¸åˆ°æ­£ç¡®çš„å¥æŸ„çš„ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨çŠ¶æ€7ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸¤ä¸ªæ“ä½œï¼š</p><ul>
<li>å¯¹äºç¬¬ä¸€ä¸ªItemï¼Œâ€œadd-&gt;mul.â€ï¼Œéœ€è¦åšä¸€ä¸ªè§„çº¦æ“ä½œã€‚</li>
<li>å¯¹äºç¬¬äºŒä¸ªItemï¼Œâ€œmul-&gt;mul.*priâ€ï¼Œå®é™…ä¸Šéœ€è¦åšä¸€ä¸ªç§»è¿›æ“ä½œã€‚</li>
</ul><p>è¿™é‡Œå‘ç”Ÿçš„å†²çªï¼Œå°±å«åšâ€œç§»è¿›/è§„çº¦â€å†²çªï¼ˆShift/Reduce Conflictï¼‰ã€‚æ„æ€æ˜¯ï¼Œåˆå¯ä»¥åšç§»è¿›ï¼Œåˆå¯ä»¥åšè§„çº¦ï¼Œåˆ°åº•åšå“ªä¸ªï¼Ÿå¯¹äºçŠ¶æ€7æ¥è¯´ï¼Œåˆ°åº•åšå“ªä¸ªæ“ä½œï¼Œå®é™…ä¸Šå–å†³äºå³è¾¹çš„Tokenã€‚</p><p><strong>SLRï¼ˆSimple LRï¼‰æ˜¯åœ¨LR(0)çš„åŸºç¡€ä¸Šåšäº†å¢å¼ºã€‚</strong>å¯¹äºçŠ¶æ€7çš„è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¦åŠ ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ï¼šå³è¾¹ä¸‹ä¸€ä¸ªè¾“å…¥çš„Tokenï¼Œæ˜¯ä¸æ˜¯åœ¨addçš„Followé›†åˆä¸­ã€‚å› ä¸ºåªæœ‰è¿™æ ·ï¼Œåšè§„çº¦æ‰æœ‰æ„ä¹‰ã€‚</p><p>åœ¨ä¾‹å­ä¸­ï¼Œaddçš„Followé›†åˆæ˜¯{+ ) $}ã€‚å¦‚æœä¸åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œé‚£ä¹ˆåšè§„çº¦è‚¯å®šæ˜¯ä¸åˆæ³•çš„ã€‚å› ä¸ºFollowé›†åˆçš„æ„æ€ï¼Œå°±æ˜¯å“ªäº›Tokenå¯ä»¥å‡ºç°åœ¨æŸä¸ªéç»ˆç»“ç¬¦åé¢ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨çŠ¶æ€7ä¸­ï¼Œä¸‹ä¸€ä¸ªTokenæ˜¯*ï¼Œå®ƒä¸åœ¨addçš„Followé›†åˆä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åªå‰©äº†ä¸€ä¸ªå¯è¡Œçš„é€‰æ‹©ï¼Œå°±æ˜¯ç§»è¿›ã€‚è¿™æ ·å°±ä¸å­˜åœ¨ä¸¤ä¸ªé€‰æ‹©ï¼Œä¹Ÿä¸å­˜åœ¨å†²çªã€‚</p><p>å®é™…ä¸Šï¼Œå°±æˆ‘ä»¬æœ¬è®²æ‰€ç”¨çš„ç¤ºä¾‹è¯­æ³•è€Œè¨€ï¼ŒSLRå°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å¯¹äºå¦ä¸€äº›æ›´å¤æ‚çš„è¯­æ³•ï¼Œé‡‡ç”¨SLRä»ç„¶ä¼šäº§ç”Ÿå†²çªï¼Œæ¯”å¦‚ï¼š</p><pre><code>start -&gt; exp
exp -&gt; lvalue = rvalue
exp -&gt; rvalue
lvalue -&gt; Id
lvalue -&gt; *rvalue
rvalue -&gt; lvalue
</code></pre><p>è¿™ä¸ªè¯­æ³•è¯´çš„æ˜¯å…³äºå·¦å€¼å’Œå³å€¼çš„æƒ…å†µï¼Œæˆ‘ä»¬æ›¾åœ¨è¯­ä¹‰åˆ†æçš„æ—¶å€™è¯´è¿‡ã€‚åœ¨è¿™ä¸ªè¯­æ³•é‡Œï¼Œå³å€¼åªèƒ½å‡ºç°åœ¨èµ‹å€¼ç¬¦å·å³è¾¹ã€‚</p><p>åœ¨çŠ¶æ€2ï¼Œå¦‚æœä¸‹ä¸€ä¸ªè¾“å…¥æ˜¯â€œ=â€ï¼Œé‚£ä¹ˆåšç§»è¿›å’Œè§„çº¦éƒ½æ˜¯å¯ä»¥çš„ã€‚å› ä¸ºâ€œ=â€åœ¨rvalueçš„Followé›†åˆä¸­ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/0c/cd/0cf9a256a0fc6b4681de8381e4cdb9cd.jpg" alt=""></p><p>æ€ä¹ˆæ¥å¤„ç†è¿™ç§å†²çªå‘¢ï¼Ÿä»…ä»…æ ¹æ®Followé›†åˆæ¥åˆ¤æ–­æ˜¯å¦Reduceï¼Œä¸å¤ªä¸¥è°¨ã€‚å› ä¸ºåœ¨ä¸Šå›¾çŠ¶æ€2çš„æƒ…å†µä¸‹ï¼Œå³ä½¿åé¢è·Ÿç€çš„æ˜¯â€œ=â€ï¼Œæˆ‘ä»¬ä»ç„¶ä¸èƒ½åšè§„çº¦ã€‚å› ä¸ºä½ ä¸€è§„çº¦ï¼Œå°±æˆäº†ä¸€ä¸ªå³å€¼ï¼Œä½†å®ƒåœ¨ç­‰å·çš„å·¦è¾¹ï¼Œæ˜¾ç„¶æ˜¯è·Ÿæˆ‘ä»¬çš„è¯­æ³•å®šä¹‰å†²çªçš„ã€‚</p><p>åŠæ³•æ˜¯Followé›†åˆæ‹†äº†ï¼ŒæŠŠå®ƒçš„æ¯ä¸ªæˆå‘˜éƒ½å˜æˆItemçš„ä¸€éƒ¨åˆ†ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½åšæ›´ç»†è‡´çš„åˆ¤æ–­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™æ ·ç»†åŒ–ä»¥åï¼Œæˆ‘ä»¬å‘ç°åœ¨çŠ¶æ€2ä¸­ï¼Œåªæœ‰ä¸‹ä¸€ä¸ªè¾“å…¥æ˜¯â€œ$â€çš„æ—¶å€™ï¼Œæ‰èƒ½åšè§„çº¦ã€‚è¿™å°±æ˜¯LR(1)ç®—æ³•çš„åŸç†ï¼Œå®ƒæ›´åŠ å¼ºå¤§ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/5b/cb/5baeddc5b854173b1ec2a4c5bdef33cb.jpg" alt=""></p><p>ä½†LR(1)ç®—æ³•ä¹Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯DFAå¯èƒ½ä¼šå¾ˆå¤§ã€‚åœ¨è¯­æ³•åˆ†æé˜¶æ®µï¼ŒDFAçš„å¤§å°ä¼šéšç€è¯­æ³•è§„åˆ™çš„æ•°é‡å‘ˆæŒ‡æ•°çº§ä¸Šå‡ï¼Œä¸€ä¸ªå…¸å‹çš„è¯­è¨€çš„DFAçŠ¶æ€å¯èƒ½è¾¾åˆ°ä¸Šåƒä¸ªï¼Œè¿™ä¼šä½¿è¯­æ³•åˆ†æçš„æ€§èƒ½å¾ˆå·®ï¼Œä»è€Œä¹Ÿä¸§å¤±äº†å®ç”¨æ€§ã€‚</p><p><strong>LALR(k)æ˜¯åŸºäºè¿™ä¸ªç¼ºç‚¹åšçš„æ”¹è¿›ã€‚</strong>å®ƒç”¨äº†ä¸€äº›æŠ€å·§ï¼Œèƒ½è®©çŠ¶æ€æ•°é‡å˜å¾—æ¯”è¾ƒå°‘ï¼Œä½†å¤„ç†èƒ½åŠ›æ²¡æœ‰å¤ªå¤§çš„æŸå¤±ã€‚YACCå’ŒBisonè¿™ä¸¤ä¸ªå·¥å…·ï¼Œå°±æ˜¯åŸºäºLALR(1)ç®—æ³•çš„ã€‚</p><h2>è¯¾ç¨‹å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬è®²äº†è‡ªåº•å‘ä¸Šçš„LRç®—æ³•çš„åŸç†ï¼ŒåŒ…æ‹¬ç§»è¿›-è§„çº¦ï¼Œå¦‚ä½•å¯»æ‰¾æ­£ç¡®çš„å¥æŸ„ï¼Œå¦‚æœåŸºäºNFAå’ŒDFAå†³å®šå¦‚ä½•åšç§»è¿›å’Œè§„çº¦ã€‚</p><p>LRç®—æ³•æ˜¯å…¬è®¤çš„æ¯”è¾ƒéš¾å­¦çš„ä¸€ä¸ªç®—æ³•ã€‚å¥½åœ¨æˆ‘ä»¬å·²ç»åœ¨å‰ä¸¤è®²ç»™å®ƒåšäº†æŠ€æœ¯ä¸Šçš„é“ºå«äº†ï¼ŒåŒ…æ‹¬NFAå’ŒDFAï¼ŒFirstå’ŒFollowé›†åˆã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬é‡ç‚¹åœ¨äºå»ºç«‹ç›´è§‚ç†è§£ï¼Œç‰¹åˆ«æ˜¯å¦‚ä½•ä¾æ®æ ˆé‡Œçš„ä¿¡æ¯åšæ­£ç¡®çš„åæ¨ã€‚è¿™ä¸ªç›´è§‰è®¤çŸ¥å¾ˆé‡è¦ï¼Œå»ºç«‹è¿™ä¸ªç›´è§‰çš„æœ€å¥½åŠæ³•ï¼Œå°±æ˜¯åƒæœ¬èŠ‚è¯¾ä¸€æ ·ï¼Œæ ¹æ®å®ä¾‹æ¥ç”»å›¾ã€æ¨å¯¼ã€‚è¿™æ ·ï¼Œåœ¨ä½ çœŸæ­£åŠ¨æ‰‹å†™ç®—æ³•çš„æ—¶å€™ï¼Œå°±èƒ¸æœ‰æˆç«¹äº†ï¼</p><p>åˆ°ä»Šå¤©ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æŠŠå‰ç«¯æŠ€æœ¯ä¸­çš„å…³é”®ç®—æ³•éƒ½è®²å®Œäº†ã€‚<strong>ä¸è¿‡æˆ‘è¿˜æ˜¯æƒ³å¼ºè°ƒä¸€ä¸‹ï¼Œ</strong>å¦‚æœæƒ³çœŸæ­£æŒæ¡è¿™äº›ç®—æ³•ï¼Œå¿…é¡»åŠ¨æ‰‹å®ç°ä¸€ä¸‹æ‰è¡Œï¼Œå‹¤åŠ¨æ‰‹æ‰æ˜¯ç‹é“ã€‚</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>åœ¨è®²è‡ªé¡¶å‘ä¸‹çš„ç®—æ³•æ—¶ï¼Œæˆ‘æåˆ°ï¼Œé€’å½’æ€ç»´æ˜¯é‡è¦çš„è®¡ç®—æœºç§‘å­¦æ€ç»´æ–¹å¼ã€‚è€Œè‡ªåº•å‘ä¸Šçš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å¦ä¸€ç§é‡è¦çš„æ€ç»´æ–¹å¼ã€‚é‚£ä¹ˆï¼Œè¯·ç»“åˆä½ çš„ç»éªŒï¼Œæ€è€ƒä¸€ä¸‹åœ¨ä½ çš„é¢†åŸŸå†…ï¼Œæ˜¯å¦æœ‰ä¸€äº›é—®é¢˜ï¼Œç”¨è‡ªåº•å‘ä¸Šçš„æ–¹æ³•èƒ½æ›´å¥½åœ°è§£å†³ã€‚LRç®—æ³•çš„ç§»è¿›-è§„çº¦æ€æƒ³ï¼Œèƒ½å¦åœ¨è§£å†³å…¶ä»–è‡ªåº•å‘ä¸Šçš„é—®é¢˜ä¸­å‘æŒ¥ä½œç”¨ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ç»éªŒå’Œæ€è€ƒã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p>æœ¬èŠ‚è¯¾çš„ç¤ºä¾‹ä»£ç æˆ‘æ”¾åœ¨äº†æ–‡æœ«ï¼Œä¾›ä½ å‚è€ƒã€‚</p><ul>
<li>lab/16-18ï¼ˆç®—æ³•ç¯‡çš„ç¤ºä¾‹ä»£ç ï¼‰ï¼š<a href="https://gitee.com/richard-gong/PlayWithCompiler/tree/master/lab/16-18">ç äº‘</a>   <a href="https://github.com/RichardGong/PlayWithCompiler/tree/master/lab/16-18">GitHub</a></li>
<li>LLParser.javaï¼ˆLLç®—æ³•çš„è¯­æ³•è§£æå™¨ï¼‰ï¼š<a href="https://gitee.com/richard-gong/PlayWithCompiler/blob/master/lab/16-18/src/main/java/play/parser/LRParser.java">ç äº‘</a>   <a href="https://github.com/RichardGong/PlayWithCompiler/blob/master/lab/16-18/src/main/java/play/parser/LRParser.java">GitHub</a></li>
</ul><p><img src="https://static001.geekbang.org/resource/image/00/66/008ff7b6092be5463a414a0e0771dc66.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ZYS  2019-09-23 12:28:27
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å®«è€å¸ˆè¿™ä¸ªè¯¾ä»¶åšçš„çœŸæ£’ğŸ‘ï¼ŒGCCè¯­æ³•åˆ†æç”¨çš„æ˜¯LRåˆ†æå™¨ä¹ˆï¼ŸClangç”¨çš„æ˜¯ä»€ä¹ˆè¯­æ³•åˆ†æå™¨ 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>